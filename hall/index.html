<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–°—Ö–µ–º–∞ –∑–∞–ª–∞ | @gavril.anatolievich</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="manifest" href="manifest.json">

    <meta name="theme-color" content="#ffffff">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="apple-mobile-web-app-status-bar-style" content="#ffffff">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="–°—Ö–µ–º–∞ –∑–∞–ª–∞ by gavril.anatolievich" />
    
    <link rel="icon" type="image/png" href="favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="favicon.svg" />
    <link rel="shortcut icon" href="favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png" />
    <link rel="manifest" href="site.webmanifest" />

    <style>
        * {
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
        }
        html,
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
            user-select: none;
        }
        .container {
            display: flex;
            height: 100vh;
            background-color: white;
        }
        .canvas-container {
            flex: 1;
            position: relative;
            overflow: hidden;
            background-color: #f5f5f5;
        }
        .controls {
            width: 400px;
            padding: 20px;
            background-color: #f9f9f9;
            overflow-y: auto;
        }
        canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #fff;
            cursor: pointer;
        }
        .control-title {
            text-align: center;
            font-size: 0.875rem;
            margin: 0 0 1rem;
        }
        .control-title img {
            margin: 0 auto;
            width: 64px;
        }
        .control-title h1 {
            font-size: 1.5em;
            margin: 0;
        }
        .control-title p {
            margin: 0;
        }
        h3, label {
            font-size: 1rem;
            margin: 0 0 0.5rem;
        }
        .control-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input, button, select {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            border: none;
            border-radius: 9px;
        }
        #eventDate {
            font-family: Arial, sans-serif;
            color: #777;
        }
        .btn {
            color: white;
            border: none;
            cursor: pointer;
            font-weight: bold;
        }
        .btn-primary {
            background: linear-gradient(to bottom, #00b973, #008d8b);
        }
        .btn-primary:hover {
            background: linear-gradient(to bottom, #00a368, #007a7a);
        }
        .btn-danger {
            background: linear-gradient(to bottom, #dc3545, #c82333);
        }
        .btn-danger:hover {
            background: linear-gradient(to bottom, #c82333, #a71e2a);
        }
        .btn-secondary {
            background: linear-gradient(to bottom, #007bff, #0056b3);
        }
        .btn-secondary:hover {
            background: linear-gradient(to bottom, #0069d9, #004085);
        }
        .status-controls {
            display: flex;
            gap: 10px;
        }
        .status-controls button {
            flex: 1;
        }
        .selected-info {
            background-color: #fff;
            padding: 10px;
            margin-bottom: 20px;
            border-radius: 9px;
        }
        .selected-info p {
            font-size: 12px;
            margin: 0;
        }
        .seat-status {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
        }
        .color-box {
            width: 20px;
            height: 20px;
            margin-right: 10px;
            border: 1px solid #ddd;
        }
        .zoom-controls {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
        }
        .zoom-controls button {
            width: 40px;
            height: 40px;
            margin: 5px;
            font-size: 18px;
            font-weight: bold;
        }
        .price-legend {
            margin-top: 10px;
        }
        .price-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 5px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
        }
        .price-item:hover {
            background-color: #e9e9e9;
        }
        .price-color {
            width: 15px;
            height: 15px;
            margin-right: 10px;
        }
        .checkbox-group {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        .checkbox-group input {
            width: auto;
            margin-right: 10px;
        }
        .export-controls {
            display: flex;
            gap: 10px;
        }
        .export-controls button {
            flex: 1;
        }
        .template-controls {
            display: flex;
            gap: 10px;
        }
        .template-controls button {
            flex: 1;
        }
        /* –°—Ç–∏–ª–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è */
        .mobile-message {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            z-index: 1000;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
            flex-direction: column;
        }

        .mobile-message-content {
            max-width: 500px;
            background: rgba(255, 255, 255, 0.1);
            padding: 40px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .mobile-message h2 {
            font-size: 2em;
            margin-bottom: 20px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .mobile-message p {
            font-size: 1.2em;
            line-height: 1.6;
            margin-bottom: 10px;
            text-shadow: 0 1px 5px rgba(0, 0, 0, 0.3);
        }

        .mobile-icon {
            font-size: 4em;
            margin-bottom: 20px;
        }

        /* –°–∫—Ä—ã–≤–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
        @media (max-width: 1024px), (hover: none) and (pointer: coarse) {
            .container {
                display: none;
            }
            .mobile-message {
                display: flex;
            }
        }

        /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ–¥–∏–∞-–∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –ª—É—á—à–µ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
        @media (hover: none) and (pointer: coarse) {
            .container {
                display: none;
            }
            .mobile-message {
                display: flex;
            }
        }

        @media (max-width: 768px) {
            .container {
                display: none;
            }
            .mobile-message {
                display: flex;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="canvas-container">
            <div class="zoom-controls">
                <button class="btn btn-primary" id="zoomInBtn">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="#FFFFFF" d="M304 192v32c0 6.6-5.4 12-12 12h-56v56c0 6.6-5.4 12-12 12h-32c-6.6 0-12-5.4-12-12v-56h-56c-6.6 0-12-5.4-12-12v-32c0-6.6 5.4-12 12-12h56v-56c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v56h56c6.6 0 12 5.4 12 12zm201 284.7L476.7 505c-9.4 9.4-24.6 9.4-33.9 0L343 405.3c-4.5-4.5-7-10.6-7-17V372c-35.3 27.6-79.7 44-128 44C93.1 416 0 322.9 0 208S93.1 0 208 0s208 93.1 208 208c0 48.3-16.4 92.7-44 128h16.3c6.4 0 12.5 2.5 17 7l99.7 99.7c9.3 9.4 9.3 24.6 0 34zM344 208c0-75.2-60.8-136-136-136S72 132.8 72 208s60.8 136 136 136 136-60.8 136-136z"/></svg>
                </button>
                <button class="btn btn-primary" id="zoomOutBtn">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="#FFFFFF" d="M304 192v32c0 6.6-5.4 12-12 12H124c-6.6 0-12-5.4-12-12v-32c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm201 284.7L476.7 505c-9.4 9.4-24.6 9.4-33.9 0L343 405.3c-4.5-4.5-7-10.6-7-17V372c-35.3 27.6-79.7 44-128 44C93.1 416 0 322.9 0 208S93.1 0 208 0s208 93.1 208 208c0 48.3-16.4 92.7-44 128h16.3c6.4 0 12.5 2.5 17 7l99.7 99.7c9.3 9.4 9.3 24.6 0 34zM344 208c0-75.2-60.8-136-136-136S72 132.8 72 208s60.8 136 136 136 136-60.8 136-136z"/></svg>
                </button>
                <button class="btn btn-primary" id="resetZoomBtn">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="#FFFFFF" d="M370.72 133.28C339.458 104.008 298.888 87.962 255.848 88c-77.458.068-144.328 53.178-162.791 126.85-1.344 5.363-6.122 9.15-11.651 9.15H24.103c-7.498 0-13.194-6.807-11.807-14.176C33.933 94.924 134.813 8 256 8c66.448 0 126.791 26.136 171.315 68.685L463.03 40.97C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.749zM32 296h134.059c21.382 0 32.09 25.851 16.971 40.971l-41.75 41.75c31.262 29.273 71.835 45.319 114.876 45.28 77.418-.07 144.315-53.144 162.787-126.849 1.344-5.363 6.122-9.15 11.651-9.15h57.304c7.498 0 13.194 6.807 11.807 14.176C478.067 417.076 377.187 504 256 504c-66.448 0-126.791-26.136-171.315-68.685L48.97 471.03C33.851 486.149 8 475.441 8 454.059V320c0-13.255 10.745-24 24-24z"/></svg>
                </button>
            </div>
            <canvas id="hallCanvas"></canvas>
        </div>
        <div class="controls">
            <div class="control-title">
                <img src="logo.webp" alt="">
                <h1>–°—Ö–µ–º–∞ –∑–∞–ª–∞</h1>
                <p>–î–æ–º–∞ –¥—Ä—É–∂–±—ã –Ω–∞—Ä–æ–¥–æ–≤ –∏–º. –ê.–ï. –ö—É–ª–∞–∫–æ–≤—Å–∫–æ–≥–æ</p>
            </div>
            <div class="control-group">
                <label for="eventName">–ù–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è:</label>
                <input type="text" id="eventName" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è" required>
            </div>

            <div class="control-group">
                <label for="eventDate">–î–∞—Ç–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è:</label>
                <input type="date" id="eventDate" required>
            </div>
            <div class="control-group">
                <h3>–û–ø–µ—Ä–∞—Ü–∏–∏</h3>
                <div class="export-controls">
                    <button class="btn btn-primary" id="exportBtn">–°–∫—Ä–∏–Ω—à–æ—Ç</button>
                    <button class="btn btn-secondary" id="saveTemplateBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —à–∞–±–ª–æ–Ω</button>
                    <button class="btn btn-primary" id="loadTemplateBtn">–ó–∞–≥—Ä—É–∑–∏—Ç—å —à–∞–±–ª–æ–Ω</button>
                    <input type="file" id="templateFile" accept=".json" style="display: none;">
                </div>
            </div>
            
            <div class="control-group">
                <label for="priceInput">–¶–µ–Ω–∞ –±–∏–ª–µ—Ç–∞:</label>
                <input type="number" id="priceInput" min="0" value="500">
                <button class="btn btn-primary" id="setPriceBtn">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ü–µ–Ω—É</button>
            </div>
            
            <div class="control-group">
                <h3>–°—Ç–∞—Ç—É—Å –º–µ—Å—Ç:</h3>
                <div class="status-controls">
                    <button class="btn btn-danger" id="setOccupiedBtn">–ó–∞–Ω—è—Ç–æ</button>
                    <button class="btn btn-secondary" id="setFreeBtn">–°–≤–æ–±–æ–¥–Ω–æ</button>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="directorRowCheckbox">
                    <label for="directorRowCheckbox">–î–∏—Ä–µ–∫—Ç–æ—Ä—Å–∫–∏–π —Ä—è–¥</label>
                </div>
            </div>
            
            <div class="selected-info" id="selectedInfo">
                <h3>–í—ã–¥–µ–ª–µ–Ω–Ω—ã–µ –º–µ—Å—Ç–∞:</h3>
                <p id="selectedCount">0 –º–µ—Å—Ç</p>
                <p id="totalPrice">–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: 0 —Ä—É–±.</p>
            </div>
            
            <div class="control-group">
                <h3>–õ–µ–≥–µ–Ω–¥–∞ —Ü–µ–Ω:</h3>
                <div id="priceLegend" class="price-legend">
                    <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è -->
                </div>
            </div>
            
           <!--  <div class="control-group">
                <button class="btn btn-danger" id="resetAllBtn">–°–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ</button>
            </div> -->
        </div>
    </div>
    <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ -->
    <div class="mobile-message">
        <div class="mobile-message-content">
            <div class="mobile-icon">üì±</div>
            <h2>–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ</h2>
            <p>–î–∞–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö.</p>
            <p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–∫—Ä–æ–π—Ç–µ —ç—Ç—É —Å—Ç—Ä–∞–Ω–∏—Ü—É –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ –∏–ª–∏ –Ω–æ—É—Ç–±—É–∫–µ.</p>
            <p><small>–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ç—Ä–µ–±—É–µ—Ç —Ç–æ—á–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º—ã—à—å—é –∏ –Ω–µ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω –¥–ª—è —Å–µ–Ω—Å–æ—Ä–Ω—ã—Ö —ç–∫—Ä–∞–Ω–æ–≤.</small></p>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const canvas = document.getElementById('hallCanvas');
            const ctx = canvas.getContext('2d');
            const priceInput = document.getElementById('priceInput');
            const setPriceBtn = document.getElementById('setPriceBtn');
            // const resetAllBtn = document.getElementById('resetAllBtn');
            const selectedCount = document.getElementById('selectedCount');
            const totalPrice = document.getElementById('totalPrice');
            const zoomInBtn = document.getElementById('zoomInBtn');
            const zoomOutBtn = document.getElementById('zoomOutBtn');
            const resetZoomBtn = document.getElementById('resetZoomBtn');
            const priceLegend = document.getElementById('priceLegend');
            const directorRowCheckbox = document.getElementById('directorRowCheckbox');
            const exportBtn = document.getElementById('exportBtn');
            const saveTemplateBtn = document.getElementById('saveTemplateBtn');
            const loadTemplateBtn = document.getElementById('loadTemplateBtn');
            const templateFile = document.getElementById('templateFile');
            const setOccupiedBtn = document.getElementById('setOccupiedBtn');
            const setFreeBtn = document.getElementById('setFreeBtn');

            // –ü–∞–ª–∏—Ç—Ä–∞ —Ü–≤–µ—Ç–æ–≤ –≤ –ø–æ—Ä—è–¥–∫–µ –æ—Ç —Å–∞–º–æ–π –º–∞–ª–µ–Ω—å–∫–æ–π —Ü–µ–Ω—ã –∫ —Å–∞–º–æ–π –±–æ–ª—å—à–æ–π
            const colorPalette = [
                '#02acf6',   // 1 - –≥–æ–ª—É–±–æ–π
                '#47d055',   // 2 - –∑–µ–ª–µ–Ω—ã–π
                '#ffd336',   // 3 - –∂–µ–ª—Ç—ã–π
                '#74dcf3',   // 4 - —Å–≤–µ—Ç–ª–æ-–≥–æ–ª—É–±–æ–π
                '#fb9803',   // 5 - –æ—Ä–∞–Ω–∂–µ–≤—ã–π
                '#dd1007'    // 6 - –∫—Ä–∞—Å–Ω—ã–π
            ];

            // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø–∞–Ω–æ—Ä–∞–º–∏—Ä–æ–≤–∞–Ω–∏—è
            let scale = 1.0;
            let offsetX = 0;
            let offsetY = 0;
            let isDragging = false;
            let lastX = 0;
            let lastY = 0;

            // –î–∞–Ω–Ω—ã–µ –º–µ—Å—Ç –∏–∑ SVG (–æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
            const seatsData = [
                // –û—Å–Ω–æ–≤–Ω—ã–µ —Ä—è–¥—ã (1-22)
                {cx: 170, cy: 577, r: 9, row: 1, col: 1},
                {cx: 190, cy: 577, r: 9, row: 1, col: 2},
                {cx: 210, cy: 577, r: 9, row: 1, col: 3},
                {cx: 230, cy: 577, r: 9, row: 1, col: 4},
                {cx: 250, cy: 577, r: 9, row: 1, col: 5},
                {cx: 270, cy: 577, r: 9, row: 1, col: 6},
                {cx: 290, cy: 577, r: 9, row: 1, col: 7},
                {cx: 310, cy: 577, r: 9, row: 1, col: 8},
                {cx: 330, cy: 577, r: 9, row: 1, col: 9},
                {cx: 350, cy: 577, r: 9, row: 1, col: 10},
                {cx: 370, cy: 577, r: 9, row: 1, col: 11},
                {cx: 430, cy: 577, r: 9, row: 1, col: 12},
                {cx: 450, cy: 577, r: 9, row: 1, col: 13},
                {cx: 470, cy: 577, r: 9, row: 1, col: 14},
                {cx: 490, cy: 577, r: 9, row: 1, col: 15},
                {cx: 510, cy: 577, r: 9, row: 1, col: 16},
                {cx: 530, cy: 577, r: 9, row: 1, col: 17},
                {cx: 550, cy: 577, r: 9, row: 1, col: 18},
                {cx: 570, cy: 577, r: 9, row: 1, col: 19},
                {cx: 590, cy: 577, r: 9, row: 1, col: 20},
                {cx: 610, cy: 577, r: 9, row: 1, col: 21},
                {cx: 630, cy: 577, r: 9, row: 1, col: 22},

                // –†—è–¥ 2
                {cx: 170, cy: 555, r: 9, row: 2, col: 1},
                {cx: 190, cy: 555, r: 9, row: 2, col: 2},
                {cx: 210, cy: 555, r: 9, row: 2, col: 3},
                {cx: 230, cy: 555, r: 9, row: 2, col: 4},
                {cx: 250, cy: 555, r: 9, row: 2, col: 5},
                {cx: 270, cy: 555, r: 9, row: 2, col: 6},
                {cx: 290, cy: 555, r: 9, row: 2, col: 7},
                {cx: 310, cy: 555, r: 9, row: 2, col: 8},
                {cx: 330, cy: 555, r: 9, row: 2, col: 9},
                {cx: 350, cy: 555, r: 9, row: 2, col: 10},
                {cx: 370, cy: 555, r: 9, row: 2, col: 11},
                {cx: 430, cy: 555, r: 9, row: 2, col: 12},
                {cx: 450, cy: 555, r: 9, row: 2, col: 13},
                {cx: 470, cy: 555, r: 9, row: 2, col: 14},
                {cx: 490, cy: 555, r: 9, row: 2, col: 15},
                {cx: 510, cy: 555, r: 9, row: 2, col: 16},
                {cx: 530, cy: 555, r: 9, row: 2, col: 17},
                {cx: 550, cy: 555, r: 9, row: 2, col: 18},
                {cx: 570, cy: 555, r: 9, row: 2, col: 19},
                {cx: 590, cy: 555, r: 9, row: 2, col: 20},
                {cx: 610, cy: 555, r: 9, row: 2, col: 21},
                {cx: 630, cy: 555, r: 9, row: 2, col: 22},

                // –†—è–¥ 3
                {cx: 170, cy: 533, r: 9, row: 3, col: 1},
                {cx: 190, cy: 533, r: 9, row: 3, col: 2},
                {cx: 210, cy: 533, r: 9, row: 3, col: 3},
                {cx: 230, cy: 533, r: 9, row: 3, col: 4},
                {cx: 250, cy: 533, r: 9, row: 3, col: 5},
                {cx: 270, cy: 533, r: 9, row: 3, col: 6},
                {cx: 290, cy: 533, r: 9, row: 3, col: 7},
                {cx: 310, cy: 533, r: 9, row: 3, col: 8},
                {cx: 330, cy: 533, r: 9, row: 3, col: 9},
                {cx: 350, cy: 533, r: 9, row: 3, col: 10},
                {cx: 370, cy: 533, r: 9, row: 3, col: 11},
                {cx: 430, cy: 533, r: 9, row: 3, col: 12},
                {cx: 450, cy: 533, r: 9, row: 3, col: 13},
                {cx: 470, cy: 533, r: 9, row: 3, col: 14},
                {cx: 490, cy: 533, r: 9, row: 3, col: 15},
                {cx: 510, cy: 533, r: 9, row: 3, col: 16},
                {cx: 530, cy: 533, r: 9, row: 3, col: 17},
                {cx: 550, cy: 533, r: 9, row: 3, col: 18},
                {cx: 570, cy: 533, r: 9, row: 3, col: 19},
                {cx: 590, cy: 533, r: 9, row: 3, col: 20},
                {cx: 610, cy: 533, r: 9, row: 3, col: 21},
                {cx: 630, cy: 533, r: 9, row: 3, col: 22},

                // –†—è–¥ 4
                {cx: 170, cy: 511, r: 9, row: 4, col: 1},
                {cx: 190, cy: 511, r: 9, row: 4, col: 2},
                {cx: 210, cy: 511, r: 9, row: 4, col: 3},
                {cx: 230, cy: 511, r: 9, row: 4, col: 4},
                {cx: 250, cy: 511, r: 9, row: 4, col: 5},
                {cx: 270, cy: 511, r: 9, row: 4, col: 6},
                {cx: 290, cy: 511, r: 9, row: 4, col: 7},
                {cx: 310, cy: 511, r: 9, row: 4, col: 8},
                {cx: 330, cy: 511, r: 9, row: 4, col: 9},
                {cx: 350, cy: 511, r: 9, row: 4, col: 10},
                {cx: 370, cy: 511, r: 9, row: 4, col: 11},
                {cx: 430, cy: 511, r: 9, row: 4, col: 12},
                {cx: 450, cy: 511, r: 9, row: 4, col: 13},
                {cx: 470, cy: 511, r: 9, row: 4, col: 14},
                {cx: 490, cy: 511, r: 9, row: 4, col: 15},
                {cx: 510, cy: 511, r: 9, row: 4, col: 16},
                {cx: 530, cy: 511, r: 9, row: 4, col: 17},
                {cx: 550, cy: 511, r: 9, row: 4, col: 18},
                {cx: 570, cy: 511, r: 9, row: 4, col: 19},
                {cx: 590, cy: 511, r: 9, row: 4, col: 20},
                {cx: 610, cy: 511, r: 9, row: 4, col: 21},
                {cx: 630, cy: 511, r: 9, row: 4, col: 22},

                // –†—è–¥ 5
                {cx: 170, cy: 489, r: 9, row: 5, col: 1},
                {cx: 190, cy: 489, r: 9, row: 5, col: 2},
                {cx: 210, cy: 489, r: 9, row: 5, col: 3},
                {cx: 230, cy: 489, r: 9, row: 5, col: 4},
                {cx: 250, cy: 489, r: 9, row: 5, col: 5},
                {cx: 270, cy: 489, r: 9, row: 5, col: 6},
                {cx: 290, cy: 489, r: 9, row: 5, col: 7},
                {cx: 310, cy: 489, r: 9, row: 5, col: 8},
                {cx: 330, cy: 489, r: 9, row: 5, col: 9},
                {cx: 350, cy: 489, r: 9, row: 5, col: 10},
                {cx: 370, cy: 489, r: 9, row: 5, col: 11},
                {cx: 430, cy: 489, r: 9, row: 5, col: 12},
                {cx: 450, cy: 489, r: 9, row: 5, col: 13},
                {cx: 470, cy: 489, r: 9, row: 5, col: 14},
                {cx: 490, cy: 489, r: 9, row: 5, col: 15},
                {cx: 510, cy: 489, r: 9, row: 5, col: 16},
                {cx: 530, cy: 489, r: 9, row: 5, col: 17},
                {cx: 550, cy: 489, r: 9, row: 5, col: 18},
                {cx: 570, cy: 489, r: 9, row: 5, col: 19},
                {cx: 590, cy: 489, r: 9, row: 5, col: 20},
                {cx: 610, cy: 489, r: 9, row: 5, col: 21},
                {cx: 630, cy: 489, r: 9, row: 5, col: 22},

                // –†—è–¥ 6
                {cx: 170, cy: 467, r: 9, row: 6, col: 1},
                {cx: 190, cy: 467, r: 9, row: 6, col: 2},
                {cx: 210, cy: 467, r: 9, row: 6, col: 3},
                {cx: 230, cy: 467, r: 9, row: 6, col: 4},
                {cx: 250, cy: 467, r: 9, row: 6, col: 5},
                {cx: 270, cy: 467, r: 9, row: 6, col: 6},
                {cx: 290, cy: 467, r: 9, row: 6, col: 7},
                {cx: 310, cy: 467, r: 9, row: 6, col: 8},
                {cx: 330, cy: 467, r: 9, row: 6, col: 9},
                {cx: 350, cy: 467, r: 9, row: 6, col: 10},
                {cx: 370, cy: 467, r: 9, row: 6, col: 11},
                {cx: 430, cy: 467, r: 9, row: 6, col: 12},
                {cx: 450, cy: 467, r: 9, row: 6, col: 13},
                {cx: 470, cy: 467, r: 9, row: 6, col: 14},
                {cx: 490, cy: 467, r: 9, row: 6, col: 15},
                {cx: 510, cy: 467, r: 9, row: 6, col: 16},
                {cx: 530, cy: 467, r: 9, row: 6, col: 17},
                {cx: 550, cy: 467, r: 9, row: 6, col: 18},
                {cx: 570, cy: 467, r: 9, row: 6, col: 19},
                {cx: 590, cy: 467, r: 9, row: 6, col: 20},
                {cx: 610, cy: 467, r: 9, row: 6, col: 21},
                {cx: 630, cy: 467, r: 9, row: 6, col: 22},

                // –†—è–¥ 7
                {cx: 170, cy: 445, r: 9, row: 7, col: 1},
                {cx: 190, cy: 445, r: 9, row: 7, col: 2},
                {cx: 210, cy: 445, r: 9, row: 7, col: 3},
                {cx: 230, cy: 445, r: 9, row: 7, col: 4},
                {cx: 250, cy: 445, r: 9, row: 7, col: 5},
                {cx: 270, cy: 445, r: 9, row: 7, col: 6},
                {cx: 290, cy: 445, r: 9, row: 7, col: 7},
                {cx: 310, cy: 445, r: 9, row: 7, col: 8},
                {cx: 330, cy: 445, r: 9, row: 7, col: 9},
                {cx: 350, cy: 445, r: 9, row: 7, col: 10},
                {cx: 370, cy: 445, r: 9, row: 7, col: 11},
                {cx: 430, cy: 445, r: 9, row: 7, col: 12},
                {cx: 450, cy: 445, r: 9, row: 7, col: 13},
                {cx: 470, cy: 445, r: 9, row: 7, col: 14},
                {cx: 490, cy: 445, r: 9, row: 7, col: 15},
                {cx: 510, cy: 445, r: 9, row: 7, col: 16},
                {cx: 530, cy: 445, r: 9, row: 7, col: 17},
                {cx: 550, cy: 445, r: 9, row: 7, col: 18},
                {cx: 570, cy: 445, r: 9, row: 7, col: 19},
                {cx: 590, cy: 445, r: 9, row: 7, col: 20},
                {cx: 610, cy: 445, r: 9, row: 7, col: 21},
                {cx: 630, cy: 445, r: 9, row: 7, col: 22},

                // –†—è–¥ 8
                {cx: 170, cy: 423, r: 9, row: 8, col: 1},
                {cx: 190, cy: 423, r: 9, row: 8, col: 2},
                {cx: 210, cy: 423, r: 9, row: 8, col: 3},
                {cx: 230, cy: 423, r: 9, row: 8, col: 4},
                {cx: 250, cy: 423, r: 9, row: 8, col: 5},
                {cx: 270, cy: 423, r: 9, row: 8, col: 6},
                {cx: 290, cy: 423, r: 9, row: 8, col: 7},
                {cx: 310, cy: 423, r: 9, row: 8, col: 8},
                {cx: 330, cy: 423, r: 9, row: 8, col: 9},
                {cx: 350, cy: 423, r: 9, row: 8, col: 10},
                {cx: 370, cy: 423, r: 9, row: 8, col: 11},
                {cx: 430, cy: 423, r: 9, row: 8, col: 12},
                {cx: 450, cy: 423, r: 9, row: 8, col: 13},
                {cx: 470, cy: 423, r: 9, row: 8, col: 14},
                {cx: 490, cy: 423, r: 9, row: 8, col: 15},
                {cx: 510, cy: 423, r: 9, row: 8, col: 16},
                {cx: 530, cy: 423, r: 9, row: 8, col: 17},
                {cx: 550, cy: 423, r: 9, row: 8, col: 18},
                {cx: 570, cy: 423, r: 9, row: 8, col: 19},
                {cx: 590, cy: 423, r: 9, row: 8, col: 20},
                {cx: 610, cy: 423, r: 9, row: 8, col: 21},
                {cx: 630, cy: 423, r: 9, row: 8, col: 22},

                // –†—è–¥ 9
                {cx: 170, cy: 401, r: 9, row: 9, col: 1},
                {cx: 190, cy: 401, r: 9, row: 9, col: 2},
                {cx: 210, cy: 401, r: 9, row: 9, col: 3},
                {cx: 230, cy: 401, r: 9, row: 9, col: 4},
                {cx: 250, cy: 401, r: 9, row: 9, col: 5},
                {cx: 270, cy: 401, r: 9, row: 9, col: 6},
                {cx: 290, cy: 401, r: 9, row: 9, col: 7},
                {cx: 310, cy: 401, r: 9, row: 9, col: 8},
                {cx: 330, cy: 401, r: 9, row: 9, col: 9},
                {cx: 350, cy: 401, r: 9, row: 9, col: 10},
                {cx: 370, cy: 401, r: 9, row: 9, col: 11},
                {cx: 430, cy: 401, r: 9, row: 9, col: 12},
                {cx: 450, cy: 401, r: 9, row: 9, col: 13},
                {cx: 470, cy: 401, r: 9, row: 9, col: 14},
                {cx: 490, cy: 401, r: 9, row: 9, col: 15},
                {cx: 510, cy: 401, r: 9, row: 9, col: 16},
                {cx: 530, cy: 401, r: 9, row: 9, col: 17},
                {cx: 550, cy: 401, r: 9, row: 9, col: 18},
                {cx: 570, cy: 401, r: 9, row: 9, col: 19},
                {cx: 590, cy: 401, r: 9, row: 9, col: 20},
                {cx: 610, cy: 401, r: 9, row: 9, col: 21},
                {cx: 630, cy: 401, r: 9, row: 9, col: 22},

                // –†—è–¥ 10
                {cx: 170, cy: 379, r: 9, row: 10, col: 1},
                {cx: 190, cy: 379, r: 9, row: 10, col: 2},
                {cx: 210, cy: 379, r: 9, row: 10, col: 3},
                {cx: 230, cy: 379, r: 9, row: 10, col: 4},
                {cx: 250, cy: 379, r: 9, row: 10, col: 5},
                {cx: 270, cy: 379, r: 9, row: 10, col: 6},
                {cx: 290, cy: 379, r: 9, row: 10, col: 7},
                {cx: 310, cy: 379, r: 9, row: 10, col: 8},
                {cx: 330, cy: 379, r: 9, row: 10, col: 9},
                {cx: 350, cy: 379, r: 9, row: 10, col: 10},
                {cx: 370, cy: 379, r: 9, row: 10, col: 11},
                {cx: 430, cy: 379, r: 9, row: 10, col: 12},
                {cx: 450, cy: 379, r: 9, row: 10, col: 13},
                {cx: 470, cy: 379, r: 9, row: 10, col: 14},
                {cx: 490, cy: 379, r: 9, row: 10, col: 15},
                {cx: 510, cy: 379, r: 9, row: 10, col: 16},
                {cx: 530, cy: 379, r: 9, row: 10, col: 17},
                {cx: 550, cy: 379, r: 9, row: 10, col: 18},
                {cx: 570, cy: 379, r: 9, row: 10, col: 19},
                {cx: 590, cy: 379, r: 9, row: 10, col: 20},
                {cx: 610, cy: 379, r: 9, row: 10, col: 21},
                {cx: 630, cy: 379, r: 9, row: 10, col: 22},

                // –†—è–¥ 11
                {cx: 170, cy: 319, r: 9, row: 11, col: 1},
                {cx: 190, cy: 319, r: 9, row: 11, col: 2},
                {cx: 210, cy: 319, r: 9, row: 11, col: 3},
                {cx: 230, cy: 319, r: 9, row: 11, col: 4},
                {cx: 250, cy: 319, r: 9, row: 11, col: 5},
                {cx: 270, cy: 319, r: 9, row: 11, col: 6},
                {cx: 290, cy: 319, r: 9, row: 11, col: 7},
                {cx: 310, cy: 319, r: 9, row: 11, col: 8},
                {cx: 330, cy: 319, r: 9, row: 11, col: 9},
                {cx: 350, cy: 319, r: 9, row: 11, col: 10},
                {cx: 370, cy: 319, r: 9, row: 11, col: 11},
                {cx: 430, cy: 319, r: 9, row: 11, col: 12},
                {cx: 450, cy: 319, r: 9, row: 11, col: 13},
                {cx: 470, cy: 319, r: 9, row: 11, col: 14},
                {cx: 490, cy: 319, r: 9, row: 11, col: 15},
                {cx: 510, cy: 319, r: 9, row: 11, col: 16},
                {cx: 530, cy: 319, r: 9, row: 11, col: 17},
                {cx: 550, cy: 319, r: 9, row: 11, col: 18},
                {cx: 570, cy: 319, r: 9, row: 11, col: 19},
                {cx: 590, cy: 319, r: 9, row: 11, col: 20},
                {cx: 610, cy: 319, r: 9, row: 11, col: 21},
                {cx: 630, cy: 319, r: 9, row: 11, col: 22},

                // –†—è–¥ 12
                {cx: 170, cy: 297, r: 9, row: 12, col: 1},
                {cx: 190, cy: 297, r: 9, row: 12, col: 2},
                {cx: 210, cy: 297, r: 9, row: 12, col: 3},
                {cx: 230, cy: 297, r: 9, row: 12, col: 4},
                {cx: 250, cy: 297, r: 9, row: 12, col: 5},
                {cx: 270, cy: 297, r: 9, row: 12, col: 6},
                {cx: 290, cy: 297, r: 9, row: 12, col: 7},
                {cx: 310, cy: 297, r: 9, row: 12, col: 8},
                {cx: 330, cy: 297, r: 9, row: 12, col: 9},
                {cx: 350, cy: 297, r: 9, row: 12, col: 10},
                {cx: 370, cy: 297, r: 9, row: 12, col: 11},
                {cx: 430, cy: 297, r: 9, row: 12, col: 12},
                {cx: 450, cy: 297, r: 9, row: 12, col: 13},
                {cx: 470, cy: 297, r: 9, row: 12, col: 14},
                {cx: 490, cy: 297, r: 9, row: 12, col: 15},
                {cx: 510, cy: 297, r: 9, row: 12, col: 16},
                {cx: 530, cy: 297, r: 9, row: 12, col: 17},
                {cx: 550, cy: 297, r: 9, row: 12, col: 18},
                {cx: 570, cy: 297, r: 9, row: 12, col: 19},
                {cx: 590, cy: 297, r: 9, row: 12, col: 20},
                {cx: 610, cy: 297, r: 9, row: 12, col: 21},
                {cx: 630, cy: 297, r: 9, row: 12, col: 22},

                // –†—è–¥ 13
                {cx: 170, cy: 275, r: 9, row: 13, col: 1},
                {cx: 190, cy: 275, r: 9, row: 13, col: 2},
                {cx: 210, cy: 275, r: 9, row: 13, col: 3},
                {cx: 230, cy: 275, r: 9, row: 13, col: 4},
                {cx: 250, cy: 275, r: 9, row: 13, col: 5},
                {cx: 270, cy: 275, r: 9, row: 13, col: 6},
                {cx: 290, cy: 275, r: 9, row: 13, col: 7},
                {cx: 310, cy: 275, r: 9, row: 13, col: 8},
                {cx: 330, cy: 275, r: 9, row: 13, col: 9},
                {cx: 350, cy: 275, r: 9, row: 13, col: 10},
                {cx: 370, cy: 275, r: 9, row: 13, col: 11},
                {cx: 430, cy: 275, r: 9, row: 13, col: 12},
                {cx: 450, cy: 275, r: 9, row: 13, col: 13},
                {cx: 470, cy: 275, r: 9, row: 13, col: 14},
                {cx: 490, cy: 275, r: 9, row: 13, col: 15},
                {cx: 510, cy: 275, r: 9, row: 13, col: 16},
                {cx: 530, cy: 275, r: 9, row: 13, col: 17},
                {cx: 550, cy: 275, r: 9, row: 13, col: 18},
                {cx: 570, cy: 275, r: 9, row: 13, col: 19},
                {cx: 590, cy: 275, r: 9, row: 13, col: 20},
                {cx: 610, cy: 275, r: 9, row: 13, col: 21},
                {cx: 630, cy: 275, r: 9, row: 13, col: 22},

                // –†—è–¥ 14
                {cx: 170, cy: 235, r: 9, row: 14, col: 1},
                {cx: 190, cy: 235, r: 9, row: 14, col: 2},
                {cx: 210, cy: 235, r: 9, row: 14, col: 3},
                {cx: 230, cy: 235, r: 9, row: 14, col: 4},
                {cx: 250, cy: 235, r: 9, row: 14, col: 5},
                {cx: 270, cy: 235, r: 9, row: 14, col: 6},
                {cx: 290, cy: 235, r: 9, row: 14, col: 7},
                {cx: 310, cy: 235, r: 9, row: 14, col: 8},
                {cx: 330, cy: 235, r: 9, row: 14, col: 9},
                {cx: 350, cy: 235, r: 9, row: 14, col: 10},
                {cx: 370, cy: 235, r: 9, row: 14, col: 11},
                {cx: 430, cy: 235, r: 9, row: 14, col: 12},
                {cx: 450, cy: 235, r: 9, row: 14, col: 13},
                {cx: 470, cy: 235, r: 9, row: 14, col: 14},
                {cx: 490, cy: 235, r: 9, row: 14, col: 15},
                {cx: 510, cy: 235, r: 9, row: 14, col: 16},
                {cx: 530, cy: 235, r: 9, row: 14, col: 17},
                {cx: 550, cy: 235, r: 9, row: 14, col: 18},
                {cx: 570, cy: 235, r: 9, row: 14, col: 19},
                {cx: 590, cy: 235, r: 9, row: 14, col: 20},
                {cx: 610, cy: 235, r: 9, row: 14, col: 21},
                {cx: 630, cy: 235, r: 9, row: 14, col: 22},

                // –†—è–¥ 15
                {cx: 170, cy: 213, r: 9, row: 15, col: 1},
                {cx: 190, cy: 213, r: 9, row: 15, col: 2},
                {cx: 210, cy: 213, r: 9, row: 15, col: 3},
                {cx: 230, cy: 213, r: 9, row: 15, col: 4},
                {cx: 250, cy: 213, r: 9, row: 15, col: 5},
                {cx: 270, cy: 213, r: 9, row: 15, col: 6},
                {cx: 290, cy: 213, r: 9, row: 15, col: 7},
                {cx: 310, cy: 213, r: 9, row: 15, col: 8},
                {cx: 330, cy: 213, r: 9, row: 15, col: 9},
                {cx: 350, cy: 213, r: 9, row: 15, col: 10},
                {cx: 370, cy: 213, r: 9, row: 15, col: 11},
                {cx: 430, cy: 213, r: 9, row: 15, col: 12},
                {cx: 450, cy: 213, r: 9, row: 15, col: 13},
                {cx: 470, cy: 213, r: 9, row: 15, col: 14},
                {cx: 490, cy: 213, r: 9, row: 15, col: 15},
                {cx: 510, cy: 213, r: 9, row: 15, col: 16},
                {cx: 530, cy: 213, r: 9, row: 15, col: 17},
                {cx: 550, cy: 213, r: 9, row: 15, col: 18},
                {cx: 570, cy: 213, r: 9, row: 15, col: 19},
                {cx: 590, cy: 213, r: 9, row: 15, col: 20},
                {cx: 610, cy: 213, r: 9, row: 15, col: 21},
                {cx: 630, cy: 213, r: 9, row: 15, col: 22},

                // –†—è–¥ 16
                {cx: 170, cy: 191, r: 9, row: 16, col: 1},
                {cx: 190, cy: 191, r: 9, row: 16, col: 2},
                {cx: 210, cy: 191, r: 9, row: 16, col: 3},
                {cx: 230, cy: 191, r: 9, row: 16, col: 4},
                {cx: 250, cy: 191, r: 9, row: 16, col: 5},
                {cx: 270, cy: 191, r: 9, row: 16, col: 6},
                {cx: 290, cy: 191, r: 9, row: 16, col: 7},
                {cx: 310, cy: 191, r: 9, row: 16, col: 8},
                {cx: 330, cy: 191, r: 9, row: 16, col: 9},
                {cx: 350, cy: 191, r: 9, row: 16, col: 10},
                {cx: 370, cy: 191, r: 9, row: 16, col: 11},
                {cx: 430, cy: 191, r: 9, row: 16, col: 12},
                {cx: 450, cy: 191, r: 9, row: 16, col: 13},
                {cx: 470, cy: 191, r: 9, row: 16, col: 14},
                {cx: 490, cy: 191, r: 9, row: 16, col: 15},
                {cx: 510, cy: 191, r: 9, row: 16, col: 16},
                {cx: 530, cy: 191, r: 9, row: 16, col: 17},
                {cx: 550, cy: 191, r: 9, row: 16, col: 18},
                {cx: 570, cy: 191, r: 9, row: 16, col: 19},
                {cx: 590, cy: 191, r: 9, row: 16, col: 20},
                {cx: 610, cy: 191, r: 9, row: 16, col: 21},
                {cx: 630, cy: 191, r: 9, row: 16, col: 22},

                // –†—è–¥ 17
                {cx: 170, cy: 151, r: 9, row: 17, col: 1},
                {cx: 190, cy: 151, r: 9, row: 17, col: 2},
                {cx: 210, cy: 151, r: 9, row: 17, col: 3},
                {cx: 230, cy: 151, r: 9, row: 17, col: 4},
                {cx: 250, cy: 151, r: 9, row: 17, col: 5},
                {cx: 270, cy: 151, r: 9, row: 17, col: 6},
                {cx: 290, cy: 151, r: 9, row: 17, col: 7},
                {cx: 310, cy: 151, r: 9, row: 17, col: 8},
                {cx: 330, cy: 151, r: 9, row: 17, col: 9},
                {cx: 350, cy: 151, r: 9, row: 17, col: 10},
                {cx: 370, cy: 151, r: 9, row: 17, col: 11},
                {cx: 430, cy: 151, r: 9, row: 17, col: 12},
                {cx: 450, cy: 151, r: 9, row: 17, col: 13},
                {cx: 470, cy: 151, r: 9, row: 17, col: 14},
                {cx: 490, cy: 151, r: 9, row: 17, col: 15},
                {cx: 510, cy: 151, r: 9, row: 17, col: 16},
                {cx: 530, cy: 151, r: 9, row: 17, col: 17},
                {cx: 550, cy: 151, r: 9, row: 17, col: 18},
                {cx: 570, cy: 151, r: 9, row: 17, col: 19},
                {cx: 590, cy: 151, r: 9, row: 17, col: 20},
                {cx: 610, cy: 151, r: 9, row: 17, col: 21},
                {cx: 630, cy: 151, r: 9, row: 17, col: 22},

                // –†—è–¥ 18
                {cx: 170, cy: 129, r: 9, row: 18, col: 1},
                {cx: 190, cy: 129, r: 9, row: 18, col: 2},
                {cx: 210, cy: 129, r: 9, row: 18, col: 3},
                {cx: 230, cy: 129, r: 9, row: 18, col: 4},
                {cx: 250, cy: 129, r: 9, row: 18, col: 5},
                {cx: 270, cy: 129, r: 9, row: 18, col: 6},
                {cx: 290, cy: 129, r: 9, row: 18, col: 7},
                {cx: 310, cy: 129, r: 9, row: 18, col: 8},
                {cx: 330, cy: 129, r: 9, row: 18, col: 9},
                {cx: 350, cy: 129, r: 9, row: 18, col: 10},
                {cx: 370, cy: 129, r: 9, row: 18, col: 11},
                {cx: 430, cy: 129, r: 9, row: 18, col: 12},
                {cx: 450, cy: 129, r: 9, row: 18, col: 13},
                {cx: 470, cy: 129, r: 9, row: 18, col: 14},
                {cx: 490, cy: 129, r: 9, row: 18, col: 15},
                {cx: 510, cy: 129, r: 9, row: 18, col: 16},
                {cx: 530, cy: 129, r: 9, row: 18, col: 17},
                {cx: 550, cy: 129, r: 9, row: 18, col: 18},
                {cx: 570, cy: 129, r: 9, row: 18, col: 19},
                {cx: 590, cy: 129, r: 9, row: 18, col: 20},
                {cx: 610, cy: 129, r: 9, row: 18, col: 21},
                {cx: 630, cy: 129, r: 9, row: 18, col: 22},

                // –†—è–¥ 19
                {cx: 170, cy: 107, r: 9, row: 19, col: 1},
                {cx: 190, cy: 107, r: 9, row: 19, col: 2},
                {cx: 210, cy: 107, r: 9, row: 19, col: 3},
                {cx: 230, cy: 107, r: 9, row: 19, col: 4},
                {cx: 250, cy: 107, r: 9, row: 19, col: 5},
                {cx: 270, cy: 107, r: 9, row: 19, col: 6},
                {cx: 290, cy: 107, r: 9, row: 19, col: 7},
                {cx: 310, cy: 107, r: 9, row: 19, col: 8},
                {cx: 330, cy: 107, r: 9, row: 19, col: 9},
                {cx: 350, cy: 107, r: 9, row: 19, col: 10},
                {cx: 370, cy: 107, r: 9, row: 19, col: 11},
                {cx: 430, cy: 107, r: 9, row: 19, col: 12},
                {cx: 450, cy: 107, r: 9, row: 19, col: 13},
                {cx: 470, cy: 107, r: 9, row: 19, col: 14},
                {cx: 490, cy: 107, r: 9, row: 19, col: 15},
                {cx: 510, cy: 107, r: 9, row: 19, col: 16},
                {cx: 530, cy: 107, r: 9, row: 19, col: 17},
                {cx: 550, cy: 107, r: 9, row: 19, col: 18},
                {cx: 570, cy: 107, r: 9, row: 19, col: 19},
                {cx: 590, cy: 107, r: 9, row: 19, col: 20},
                {cx: 610, cy: 107, r: 9, row: 19, col: 21},
                {cx: 630, cy: 107, r: 9, row: 19, col: 22},

                // –†—è–¥ 20
                {cx: 170, cy: 67, r: 9, row: 20, col: 1},
                {cx: 190, cy: 67, r: 9, row: 20, col: 2},
                {cx: 210, cy: 67, r: 9, row: 20, col: 3},
                {cx: 230, cy: 67, r: 9, row: 20, col: 4},
                {cx: 250, cy: 67, r: 9, row: 20, col: 5},
                {cx: 270, cy: 67, r: 9, row: 20, col: 6},
                {cx: 290, cy: 67, r: 9, row: 20, col: 7},
                {cx: 310, cy: 67, r: 9, row: 20, col: 8},
                {cx: 330, cy: 67, r: 9, row: 20, col: 9},
                {cx: 350, cy: 67, r: 9, row: 20, col: 10},
                {cx: 370, cy: 67, r: 9, row: 20, col: 11},
                {cx: 430, cy: 67, r: 9, row: 20, col: 12},
                {cx: 450, cy: 67, r: 9, row: 20, col: 13},
                {cx: 470, cy: 67, r: 9, row: 20, col: 14},
                {cx: 490, cy: 67, r: 9, row: 20, col: 15},
                {cx: 510, cy: 67, r: 9, row: 20, col: 16},
                {cx: 530, cy: 67, r: 9, row: 20, col: 17},
                {cx: 550, cy: 67, r: 9, row: 20, col: 18},
                {cx: 570, cy: 67, r: 9, row: 20, col: 19},
                {cx: 590, cy: 67, r: 9, row: 20, col: 20},
                {cx: 610, cy: 67, r: 9, row: 20, col: 21},
                {cx: 630, cy: 67, r: 9, row: 20, col: 22},

                // –†—è–¥ 21
                {cx: 170, cy: 45, r: 9, row: 21, col: 1},
                {cx: 190, cy: 45, r: 9, row: 21, col: 2},
                {cx: 210, cy: 45, r: 9, row: 21, col: 3},
                {cx: 230, cy: 45, r: 9, row: 21, col: 4},
                {cx: 250, cy: 45, r: 9, row: 21, col: 5},
                {cx: 270, cy: 45, r: 9, row: 21, col: 6},
                {cx: 290, cy: 45, r: 9, row: 21, col: 7},
                {cx: 310, cy: 45, r: 9, row: 21, col: 8},
                {cx: 330, cy: 45, r: 9, row: 21, col: 9},
                {cx: 350, cy: 45, r: 9, row: 21, col: 10},
                {cx: 370, cy: 45, r: 9, row: 21, col: 11},
                {cx: 430, cy: 45, r: 9, row: 21, col: 12},
                {cx: 450, cy: 45, r: 9, row: 21, col: 13},
                {cx: 470, cy: 45, r: 9, row: 21, col: 14},
                {cx: 490, cy: 45, r: 9, row: 21, col: 15},
                {cx: 510, cy: 45, r: 9, row: 21, col: 16},
                {cx: 530, cy: 45, r: 9, row: 21, col: 17},
                {cx: 550, cy: 45, r: 9, row: 21, col: 18},
                {cx: 570, cy: 45, r: 9, row: 21, col: 19},
                {cx: 590, cy: 45, r: 9, row: 21, col: 20},
                {cx: 610, cy: 45, r: 9, row: 21, col: 21},
                {cx: 630, cy: 45, r: 9, row: 21, col: 22},

                // –†—è–¥ 22
                {cx: 170, cy: 23, r: 9, row: 22, col: 1},
                {cx: 190, cy: 23, r: 9, row: 22, col: 2},
                {cx: 210, cy: 23, r: 9, row: 22, col: 3},
                {cx: 230, cy: 23, r: 9, row: 22, col: 4},
                {cx: 250, cy: 23, r: 9, row: 22, col: 5},
                {cx: 270, cy: 23, r: 9, row: 22, col: 6},
                {cx: 290, cy: 23, r: 9, row: 22, col: 7},
                {cx: 310, cy: 23, r: 9, row: 22, col: 8},
                {cx: 330, cy: 23, r: 9, row: 22, col: 9},
                {cx: 350, cy: 23, r: 9, row: 22, col: 10},
                {cx: 370, cy: 23, r: 9, row: 22, col: 11},
                {cx: 390, cy: 23, r: 9, row: 22, col: 12},
                {cx: 410, cy: 23, r: 9, row: 22, col: 13},
                {cx: 430, cy: 23, r: 9, row: 22, col: 14},
                {cx: 450, cy: 23, r: 9, row: 22, col: 15},
                {cx: 470, cy: 23, r: 9, row: 22, col: 16},
                {cx: 490, cy: 23, r: 9, row: 22, col: 17},
                {cx: 510, cy: 23, r: 9, row: 22, col: 18},
                {cx: 530, cy: 23, r: 9, row: 22, col: 19},
                {cx: 550, cy: 23, r: 9, row: 22, col: 20},
                {cx: 570, cy: 23, r: 9, row: 22, col: 21},
                {cx: 590, cy: 23, r: 9, row: 22, col: 22},
                {cx: 610, cy: 23, r: 9, row: 22, col: 23},
                {cx: 630, cy: 23, r: 9, row: 22, col: 24},

                // –õ–µ–≤—ã–π –±–æ–∫–æ–≤–æ–π —Å–µ–∫—Ç–æ—Ä
                {cx: 130, cy: 67, r: 9, row: 'L1', col: '–û'},
                {cx: 130, cy: 45, r: 9, row: 'L2', col: '–û'},
                {cx: 130, cy: 107, r: 9, row: 'L3', col: '–û'},
                {cx: 130, cy: 129, r: 9, row: 'L4', col: '–û'},
                {cx: 130, cy: 151, r: 9, row: 'L5', col: '–û'},
                {cx: 130, cy: 191, r: 9, row: 'L6', col: '–û'},
                {cx: 130, cy: 213, r: 9, row: 'L7', col: '–û'},
                {cx: 130, cy: 235, r: 9, row: 'L8', col: '–û'},
                {cx: 130, cy: 275, r: 9, row: 'L9', col: '–û'},
                {cx: 130, cy: 297, r: 9, row: 'L10', col: '–û'},
                {cx: 130, cy: 319, r: 9, row: 'L11', col: '–û'},
                {cx: 130, cy: 379, r: 9, row: 'L12', col: '–û'},
                {cx: 130, cy: 401, r: 9, row: 'L13', col: '–û'},
                {cx: 130, cy: 423, r: 9, row: 'L14', col: '–û'},
                {cx: 130, cy: 445, r: 9, row: 'L15', col: '–û'},
                {cx: 130, cy: 467, r: 9, row: 'L16', col: '–û'},
                {cx: 130, cy: 489, r: 9, row: 'L17', col: '–û'},
                {cx: 130, cy: 511, r: 9, row: 'L18', col: '–û'},
                {cx: 130, cy: 533, r: 9, row: 'L19', col: '–û'},
                {cx: 130, cy: 555, r: 9, row: 'L20', col: '–û'},

                // –ü—Ä–∞–≤—ã–π –±–æ–∫–æ–≤–æ–π —Å–µ–∫—Ç–æ—Ä
                {cx: 670, cy: 67, r: 9, row: 'R1', col: "–û"},
                {cx: 670, cy: 45, r: 9, row: 'R2', col: "–û"},
                {cx: 670, cy: 107, r: 9, row: 'R3', col: "–û"},
                {cx: 670, cy: 129, r: 9, row: 'R4', col: "–û"},
                {cx: 670, cy: 151, r: 9, row: 'R5', col: "–û"},
                {cx: 670, cy: 191, r: 9, row: 'R6', col: "–û"},
                {cx: 670, cy: 213, r: 9, row: 'R7', col: "–û"},
                {cx: 670, cy: 235, r: 9, row: 'R8', col: "–û"},
                {cx: 670, cy: 275, r: 9, row: 'R9', col: "–û"},
                {cx: 670, cy: 297, r: 9, row: 'R10', col: "–û"},
                {cx: 670, cy: 319, r: 9, row: 'R11', col: "–û"},
                {cx: 670, cy: 379, r: 9, row: 'R12', col: "–û"},
                {cx: 670, cy: 401, r: 9, row: 'R13', col: "–û"},
                {cx: 670, cy: 423, r: 9, row: 'R14', col: "–û"},
                {cx: 670, cy: 445, r: 9, row: 'R15', col: "–û"},
                {cx: 670, cy: 467, r: 9, row: 'R16', col: "–û"},
                {cx: 670, cy: 489, r: 9, row: 'R17', col: "–û"},
                {cx: 670, cy: 511, r: 9, row: 'R18', col: "–û"},
                {cx: 670, cy: 533, r: 9, row: 'R19', col: "–û"},
                {cx: 670, cy: 555, r: 9, row: 'R20', col: "–û"},

                // –õ–µ–≤—ã–µ –±–æ–∫–æ–≤—ã–µ –º–µ—Å—Ç–∞ (–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ)
                {cx: 90, cy: 287, r: 9, row: 'LV1', col: "–ë1"},
                {cx: 90, cy: 267, r: 9, row: 'LV2', col: "–ë2"},
                {cx: 90, cy: 247, r: 9, row: 'LV3', col: "–ë3"},
                {cx: 90, cy: 227, r: 9, row: 'LV4', col: "–ë4"},
                {cx: 90, cy: 207, r: 9, row: 'LV5', col: "–ë5"},
                {cx: 90, cy: 187, r: 9, row: 'LV6', col: "–ë6"},
                {cx: 90, cy: 167, r: 9, row: 'LV7', col: "–ë7"},
                {cx: 90, cy: 147, r: 9, row: 'LV8', col: "–ë8"},
                {cx: 90, cy: 127, r: 9, row: 'LV9', col: "–ë9"},
                {cx: 90, cy: 107, r: 9, row: 'LV10', col: "–ë10"},
                {cx: 90, cy: 87, r: 9, row: 'LV11', col: "–ë11"},
                {cx: 90, cy: 67, r: 9, row: 'LV12', col: "–ë12"},

                // –ü—Ä–∞–≤—ã–µ –±–æ–∫–æ–≤—ã–µ –º–µ—Å—Ç–∞ (–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ)
                {cx: 710, cy: 287, r: 9, row: 'RV1', col: "–ë1"},
                {cx: 710, cy: 267, r: 9, row: 'RV2', col: "–ë2"},
                {cx: 710, cy: 247, r: 9, row: 'RV3', col: "–ë3"},
                {cx: 710, cy: 227, r: 9, row: 'RV4', col: "–ë4"},
                {cx: 710, cy: 207, r: 9, row: 'RV5', col: "–ë5"},
                {cx: 710, cy: 187, r: 9, row: 'RV6', col: "–ë6"},
                {cx: 710, cy: 167, r: 9, row: 'RV7', col: "–ë7"},
                {cx: 710, cy: 147, r: 9, row: 'RV8', col: "–ë8"},
                {cx: 710, cy: 127, r: 9, row: 'RV9', col: "–ë9"},
                {cx: 710, cy: 107, r: 9, row: 'RV10', col: "–ë10"},
                {cx: 710, cy: 87, r: 9, row: 'RV11', col: "–ë11"},
                {cx: 710, cy: 67, r: 9, row: 'RV12', col: "–ë12"}
            ];
            let seats = [];
            let selectedSeats = [];
            let isSelecting = false;
            let selectionStart = { x: 0, y: 0 };
            let selectionEnd = { x: 0, y: 0 };
            let contentBounds = { minX: 0, minY: 0, maxX: 800, maxY: 600 };
            // –ü—Ä–æ–≤–µ—Ä–∫–∞, –º–æ–∂–Ω–æ –ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ü–µ–Ω—É –Ω–∞ –º–µ—Å—Ç–æ (—Ç–æ–ª—å–∫–æ —Å–≤–æ–±–æ–¥–Ω—ã–µ –º–µ—Å—Ç–∞)
            function isSeatPriceable(seat) {
                return seat.status === 'free';
            }

            // –ü—Ä–æ–≤–µ—Ä–∫–∞, –º–æ–∂–Ω–æ –ª–∏ –≤—ã–¥–µ–ª–∏—Ç—å –º–µ—Å—Ç–æ (—Ç–æ–ª—å–∫–æ —Å–≤–æ–±–æ–¥–Ω—ã–µ –º–µ—Å—Ç–∞)
            function isSeatSelectable(seat) {
                return seat.status === 'free';
            }

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ canvas
            function resizeCanvas() {
                const container = canvas.parentElement;
                canvas.width = container.clientWidth;
                canvas.height = container.clientHeight;
                centerContent();
                drawHall();
            }

            // –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
            function centerContent() {
                const container = canvas.parentElement;
                const contentWidth = contentBounds.maxX - contentBounds.minX;
                const contentHeight = contentBounds.maxY - contentBounds.minY;
                
                // –í—ã—á–∏—Å–ª—è–µ–º –º–∞—Å—à—Ç–∞–± –¥–ª—è –≤–º–µ—â–µ–Ω–∏—è –≤—Å–µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
                const scaleX = container.clientWidth / (contentWidth + 100);
                const scaleY = container.clientHeight / (contentHeight + 100);
                scale = Math.min(scaleX, scaleY, 1);
                
                // –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
                offsetX = (container.clientWidth - contentWidth * scale) / 2;
                offsetY = (container.clientHeight - contentHeight * scale) / 2;
            }

            // –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –º—ã—à–∏ –≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã canvas —Å —É—á–µ—Ç–æ–º –º–∞—Å—à—Ç–∞–±–∞ –∏ —Å–º–µ—â–µ–Ω–∏—è
            function getMousePos(e) {
                const rect = canvas.getBoundingClientRect();
                return {
                    x: (e.clientX - rect.left - offsetX) / scale,
                    y: (e.clientY - rect.top - offsetY) / scale
                };
            }

            // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞ –¥–ª—è —Ü–µ–Ω—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ—Ä—è–¥–∫–∞ —Ü–µ–Ω
            function getPriceColor(price) {
                if (price === null || price === undefined) return '#e0e0e0';
                
                // –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ü–µ–Ω—ã –∏ —Å–æ—Ä—Ç–∏—Ä—É–µ–º –∏—Ö
                const uniquePrices = [...new Set(seats.map(seat => seat.price).filter(p => p !== null))].sort((a, b) => a - b);
                
                // –ù–∞—Ö–æ–¥–∏–º –∏–Ω–¥–µ–∫—Å —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω—ã –≤ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —Å–ø–∏—Å–∫–µ
                const priceIndex = uniquePrices.indexOf(price);
                
                // –ï—Å–ª–∏ —Ü–µ–Ω–∞ –Ω–∞–π–¥–µ–Ω–∞, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Ü–≤–µ—Ç –∏–∑ –ø–∞–ª–∏—Ç—Ä—ã
                if (priceIndex !== -1 && priceIndex < colorPalette.length) {
                    return colorPalette[priceIndex];
                }
                
                // –ï—Å–ª–∏ —Ü–≤–µ—Ç–æ–≤ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–µ—Ä—ã–π
                return '#e0e0e0';
            }

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–µ–≥–µ–Ω–¥—ã —Ü–µ–Ω
            function updatePriceLegend() {
                // –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ü–µ–Ω—ã –∏ —Å–æ—Ä—Ç–∏—Ä—É–µ–º –∏—Ö
                const uniquePrices = [...new Set(seats.map(seat => seat.price).filter(p => p !== null))].sort((a, b) => a - b);
                
                priceLegend.innerHTML = '';
                uniquePrices.forEach((price, index) => {
                    const item = document.createElement('div');
                    item.className = 'price-item';
                    const color = index < colorPalette.length ? colorPalette[index] : '#e0e0e0';
                    item.innerHTML = `
                        <div style="display: flex; align-items: center;">
                            <div class="price-color" style="background-color: ${color}"></div>
                            <span>${price} —Ä—É–±.</span>
                        </div>
                        <span>${seats.filter(seat => seat.price === price).length} –º–µ—Å—Ç</span>
                    `;
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –≤—ã–¥–µ–ª–µ–Ω–∏—è
                    item.addEventListener('click', () => {
                        selectSeatsByPrice(price);
                    });
                    
                    priceLegend.appendChild(item);
                });
            }

            // –í—ã–¥–µ–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –º–µ—Å—Ç —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π —Ü–µ–Ω–æ–π (—Ç–æ–ª—å–∫–æ —Å–≤–æ–±–æ–¥–Ω—ã–µ)
            function selectSeatsByPrice(price) {
                // –°–Ω–∏–º–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å–æ –≤—Å–µ—Ö –º–µ—Å—Ç
                seats.forEach(seat => {
                    seat.selected = false;
                });
                
                // –í—ã–¥–µ–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Å–≤–æ–±–æ–¥–Ω—ã–µ –º–µ—Å—Ç–∞ —Å —É–∫–∞–∑–∞–Ω–Ω–æ–π —Ü–µ–Ω–æ–π
                selectedSeats = seats.filter(seat => seat.price === price && isSeatPriceable(seat));
                selectedSeats.forEach(seat => {
                    seat.selected = true;
                });
                
                updateSelectionInfo();
                drawHall();
            }

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Å—Ç
            function initSeats() {
                seats = seatsData.map((seatData, index) => ({
                    id: index,
                    cx: seatData.cx,
                    cy: seatData.cy,
                    r: seatData.r,
                    row: seatData.row,
                    col: seatData.col,
                    status: 'free',
                    price: null, // –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–µ—Ç —Ü–µ–Ω—ã
                    selected: false
                }));

                updatePriceLegend();
            }

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ 11 —Ä—è–¥–∞ (–¥–∏—Ä–µ–∫—Ç–æ—Ä—Å–∫–æ–≥–æ)
            function updateDirectorRowStatus() {
                const isOccupied = directorRowCheckbox.checked;
                
                seats.forEach(seat => {
                    if (seat.row === 11) {
                        seat.status = isOccupied ? 'occupied' : 'free';
                        // –°–Ω–∏–º–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å –∑–∞–Ω—è—Ç—ã—Ö –º–µ—Å—Ç
                        if (isOccupied) {
                            seat.selected = false;
                        }
                    }
                });
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –≤—ã–¥–µ–ª–µ–Ω–Ω—ã—Ö –º–µ—Å—Ç
                selectedSeats = selectedSeats.filter(seat => isSeatSelectable(seat));
                
                updateSelectionInfo();
                drawHall();
            }

            // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∑–∞–ª–∞
            function drawHall() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
                ctx.save();
                
                // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ (–º–∞—Å—à—Ç–∞–± –∏ —Å–º–µ—â–µ–Ω–∏–µ)
                ctx.translate(offsetX, offsetY);
                ctx.scale(scale, scale);
                
                // –†–∏—Å—É–µ–º —Å—Ü–µ–Ω—É
                ctx.fillStyle = '#333';
                ctx.fillRect(150, 620, 500, 40);
                ctx.fillStyle = '#fff';
                ctx.font = 'bold 16px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('–°–¶–ï–ù–ê', 400, 645);
                
                // –†–∏—Å—É–µ–º –Ω–æ–º–µ—Ä–∞ —Ä—è–¥–æ–≤ —Å–ª–µ–≤–∞
                const mainRows = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22];
                mainRows.forEach(row => {
                    const seatInRow = seats.find(seat => seat.row === row && typeof seat.col === 'number');
                    if (seatInRow) {
                        ctx.fillStyle = '#666';
                        ctx.font = 'bold 8px Arial';
                        ctx.textAlign = 'right';
                        ctx.fillText(row, 155, seatInRow.cy + 3);
                    }
                });
                
                // –†–∏—Å—É–µ–º –Ω–æ–º–µ—Ä–∞ —Ä—è–¥–æ–≤ —Å–ø—Ä–∞–≤–∞
                mainRows.forEach(row => {
                    const seatInRow = seats.find(seat => seat.row === row && typeof seat.col === 'number');
                    if (seatInRow) {
                        ctx.fillStyle = '#666';
                        ctx.font = 'bold 8px Arial';
                        ctx.textAlign = 'left';
                        ctx.fillText(row, 645, seatInRow.cy + 3);
                    }
                });
                
                // –†–∏—Å—É–µ–º –º–µ—Å—Ç–∞
                seats.forEach(seat => {
                    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ü–≤–µ—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ü–µ–Ω—ã –∏ —Å—Ç–∞—Ç—É—Å–∞
                    let color = getPriceColor(seat.price);
                    let txt_color = '#fff';
                    
                    if (seat.selected) {
                        color = '#a5d6a7'; // –ó–µ–ª–µ–Ω—ã–π –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–Ω—ã—Ö
                    } else if (seat.status === 'occupied') {
                        color = '#ff6b6b'; // –ö—Ä–∞—Å–Ω—ã–π –¥–ª—è –∑–∞–Ω—è—Ç—ã—Ö
                        txt_color = '#ff6b6b';
                    }
                    
                    ctx.fillStyle = color;
                    ctx.beginPath();
                    ctx.arc(seat.cx, seat.cy, seat.r, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // –û–±–≤–æ–¥–∫–∞
                    ctx.strokeStyle = 'transparent';
                    ctx.lineWidth = 1;
                    ctx.stroke();
                    
                    // –ù–æ–º–µ—Ä –º–µ—Å—Ç–∞ (—Ä—è–¥-–º–µ—Å—Ç–æ)
                    // ctx.fillStyle = '#fff';
                    ctx.fillStyle = txt_color;
                    ctx.font = 'bold 8px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(
                        `${seat.col}`, 
                        seat.cx, 
                        seat.cy + 3
                    );

                    if (seat.status !== 'occupied') {
                        ctx.fillStyle = '#fff';
                        ctx.font = 'bold 8px Arial';
                        ctx.textAlign = 'center';
                        ctx.fillText(
                            `${seat.col}`, 
                            seat.cx, 
                            seat.cy + 3
                        );
                    }
                });
                
                // –†–∏—Å—É–µ–º –æ–±–ª–∞—Å—Ç—å –≤—ã–¥–µ–ª–µ–Ω–∏—è, –µ—Å–ª–∏ –µ—Å—Ç—å
                if (isSelecting) {
                    ctx.strokeStyle = '#a5d6a7';
                    ctx.lineWidth = 2 / scale;
                    ctx.setLineDash([5, 5]);
                    ctx.strokeRect(
                        Math.min(selectionStart.x, selectionEnd.x),
                        Math.min(selectionStart.y, selectionEnd.y),
                        Math.abs(selectionEnd.x - selectionStart.x),
                        Math.abs(selectionEnd.y - selectionStart.y)
                    );
                    ctx.setLineDash([]);
                }
                
                // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
                ctx.restore();
            }

            // –ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Å—Ç–∞ –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º –º—ã—à–∏
            function getSeatAtPosition(x, y) {
                for (let i = 0; i < seats.length; i++) {
                    const seat = seats[i];
                    const distance = Math.sqrt((x - seat.cx) ** 2 + (y - seat.cy) ** 2);
                    if (distance <= seat.r) {
                        return seat;
                    }
                }
                return null;
            }

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∞ —Å –º–µ—Å—Ç–æ–º
            function rectIntersectsSeat(rect, seat) {
                const seatRect = {
                    x: seat.cx - seat.r,
                    y: seat.cy - seat.r,
                    width: seat.r * 2,
                    height: seat.r * 2
                };
                
                return !(rect.x > seatRect.x + seatRect.width ||
                        rect.x + rect.width < seatRect.x ||
                        rect.y > seatRect.y + seatRect.height ||
                        rect.y + rect.height < seatRect.y);
            }

            // –í—ã–¥–µ–ª–µ–Ω–∏–µ –º–µ—Å—Ç –≤ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ (–≤—Å–µ –º–µ—Å—Ç–∞ –º–æ–∂–Ω–æ –≤—ã–¥–µ–ª—è—Ç—å)
            function selectSeatsInArea(startX, startY, endX, endY) {
                const selectionRect = {
                    x: Math.min(startX, endX),
                    y: Math.min(startY, endY),
                    width: Math.abs(endX - startX),
                    height: Math.abs(endY - startY)
                };
                
                // –°–Ω–∏–º–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å–æ –≤—Å–µ—Ö –º–µ—Å—Ç
                seats.forEach(seat => {
                    seat.selected = false;
                });
                
                // –í—ã–¥–µ–ª—è–µ–º –≤—Å–µ –º–µ—Å—Ç–∞, –∫–æ—Ç–æ—Ä—ã–µ –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è —Å –æ–±–ª–∞—Å—Ç—å—é –≤—ã–¥–µ–ª–µ–Ω–∏—è
                selectedSeats = [];
                seats.forEach(seat => {
                    if (rectIntersectsSeat(selectionRect, seat)) {
                        seat.selected = true;
                        selectedSeats.push(seat);
                    }
                });
                
                updateSelectionInfo();
                drawHall();
            }

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤—ã–¥–µ–ª–µ–Ω–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö (—Ç–æ–ª—å–∫–æ —Å–≤–æ–±–æ–¥–Ω—ã–µ)
            function updateSelectionInfo() {
                // –°—á–∏—Ç–∞–µ–º —Ç–æ–ª—å–∫–æ —Å–≤–æ–±–æ–¥–Ω—ã–µ –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–µ –º–µ—Å—Ç–∞
                const freeSelectedSeats = selectedSeats.filter(seat => isSeatPriceable(seat));
                selectedCount.textContent = `${freeSelectedSeats.length} –º–µ—Å—Ç`;
                
                const total = freeSelectedSeats.reduce((sum, seat) => sum + (seat.price || 0), 0);
                totalPrice.textContent = `–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: ${total} —Ä—É–±.`;
            }

            // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –º–µ—Å—Ç (–∑–∞–Ω—è—Ç–æ/—Å–≤–æ–±–æ–¥–Ω–æ)
            function setSeatsStatus(status) {
                selectedSeats.forEach(seat => {
                    seat.status = status;
                    // –ï—Å–ª–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å—Ç–∞—Ç—É—Å "–∑–∞–Ω—è—Ç–æ", —Å–Ω–∏–º–∞–µ–º —Ü–µ–Ω—É
                    if (status === 'occupied') {
                        seat.price = null;
                    }
                });
                
                updateSelectionInfo();
                updatePriceLegend();
                drawHall();
            }

            // –≠–∫—Å–ø–æ—Ä—Ç —Å—Ö–µ–º—ã –∑–∞–ª–∞ –∫–∞–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å –ª–µ–≥–µ–Ω–¥–æ–π
            function exportHallImage() {
                // –ü–æ–ª—É—á–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ –¥–∞—Ç—É –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
                const eventNameInput = document.getElementById('eventName').value;
                const eventDateInput = document.getElementById('eventDate').value;
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
                if (!eventNameInput || !eventDateInput) {
                    alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ –¥–∞—Ç—É –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è');
                    return;
                }
                
                const eventName = eventNameInput;
                const date = new Date(eventDateInput);
                const eventDate = date.toLocaleDateString('ru-RU');
                
                // –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π canvas –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞
                const exportCanvas = document.createElement('canvas');
                const exportCtx = exportCanvas.getContext('2d');
                
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä—ã –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ (—à–∏—Ä–∏–Ω–∞ + –º–µ—Å—Ç–æ –¥–ª—è –ª–µ–≥–µ–Ω–¥—ã)
                exportCanvas.width = 1000;
                exportCanvas.height = 850; // –£–≤–µ–ª–∏—á–∏–ª–∏ –≤—ã—Å–æ—Ç—É –¥–ª—è –Ω–∞–∑–≤–∞–Ω–∏—è –∏ –¥–∞—Ç—ã
                
                // –û—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º —Ñ–æ–Ω
                exportCtx.fillStyle = '#fff';
                exportCtx.fillRect(0, 0, exportCanvas.width, exportCanvas.height);
                
                // –†–∏—Å—É–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
                exportCtx.fillStyle = '#333';
                exportCtx.font = 'bold 24px Arial';
                exportCtx.textAlign = 'center';
                exportCtx.fillText(eventName, 500, 780);
                
                // –†–∏—Å—É–µ–º –¥–∞—Ç—É –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
                exportCtx.font = '18px Arial';
                exportCtx.fillText(eventDate, 500, 750);
                
                // –†–∏—Å—É–µ–º —Å—Ü–µ–Ω—É
                exportCtx.fillStyle = '#333';
                exportCtx.fillRect(150, 670, 500, 40); // –°–¥–≤–∏–Ω—É–ª–∏ —Å—Ü–µ–Ω—É –Ω–∏–∂–µ
                exportCtx.fillStyle = '#fff';
                exportCtx.font = 'bold 16px Arial';
                exportCtx.textAlign = 'center';
                exportCtx.fillText('–°–¶–ï–ù–ê', 400, 695); // –°–¥–≤–∏–Ω—É–ª–∏ —Ç–µ–∫—Å—Ç —Å—Ü–µ–Ω—ã
                
                // –†–∏—Å—É–µ–º –Ω–æ–º–µ—Ä–∞ —Ä—è–¥–æ–≤ —Å–ª–µ–≤–∞
                const mainRows = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22];
                mainRows.forEach(row => {
                    const seatInRow = seats.find(seat => seat.row === row && typeof seat.col === 'number');
                    if (seatInRow) {
                        exportCtx.fillStyle = '#333';
                        exportCtx.font = 'bold 12px Arial';
                        exportCtx.textAlign = 'right';
                        exportCtx.fillText(row, 155, seatInRow.cy + 54); // –°–¥–≤–∏–Ω—É–ª–∏ –Ω–æ–º–µ—Ä–∞ —Ä—è–¥–æ–≤
                    }
                });
                
                // –†–∏—Å—É–µ–º –Ω–æ–º–µ—Ä–∞ —Ä—è–¥–æ–≤ —Å–ø—Ä–∞–≤–∞
                mainRows.forEach(row => {
                    const seatInRow = seats.find(seat => seat.row === row && typeof seat.col === 'number');
                    if (seatInRow) {
                        exportCtx.fillStyle = '#333';
                        exportCtx.font = 'bold 12px Arial';
                        exportCtx.textAlign = 'left';
                        exportCtx.fillText(row, 645, seatInRow.cy + 54); // –°–¥–≤–∏–Ω—É–ª–∏ –Ω–æ–º–µ—Ä–∞ —Ä—è–¥–æ–≤
                    }
                });
                
                // –†–∏—Å—É–µ–º –º–µ—Å—Ç–∞
                seats.forEach(seat => {
                    let color = getPriceColor(seat.price);
                    
                    if (seat.status === 'occupied') {
                        color = '#ff6b6b';
                    }
                    
                    exportCtx.fillStyle = color;
                    exportCtx.beginPath();
                    exportCtx.arc(seat.cx, seat.cy + 50, seat.r, 0, Math.PI * 2); // –°–¥–≤–∏–Ω—É–ª–∏ –º–µ—Å—Ç–∞
                    exportCtx.fill();
                    
                    exportCtx.strokeStyle = 'transparent';
                    exportCtx.lineWidth = 1;
                    exportCtx.stroke();
                    
                    // –ù–ï –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–æ–º–µ—Ä–∞ –º–µ—Å—Ç –¥–ª—è –∑–∞–Ω—è—Ç—ã—Ö –º–µ—Å—Ç
                    if (seat.status !== 'occupied') {
                        exportCtx.fillStyle = '#fff';
                        exportCtx.font = 'bold 8px Arial';
                        exportCtx.textAlign = 'center';
                        exportCtx.fillText(
                            `${seat.col}`, 
                            seat.cx, 
                            seat.cy + 53 // –°–¥–≤–∏–Ω—É–ª–∏ —Ç–µ–∫—Å—Ç –º–µ—Å—Ç
                        );
                    }
                });
                
                // –†–∏—Å—É–µ–º –ª–µ–≥–µ–Ω–¥—É —Ü–µ–Ω —Å–ø—Ä–∞–≤–∞
                const uniquePrices = [...new Set(seats.map(seat => seat.price).filter(p => p !== null))].sort((a, b) => a - b);
                let legendY = 80;
                
                exportCtx.fillStyle = '#333';
                exportCtx.font = 'bold 14px Arial';
                exportCtx.textAlign = 'left';
                exportCtx.fillText('–õ–µ–≥–µ–Ω–¥–∞ —Ü–µ–Ω:', 750, legendY);
                legendY += 30;
                
                uniquePrices.forEach((price, index) => {
                    const color = index < colorPalette.length ? colorPalette[index] : '#e0e0e0';
                    
                    exportCtx.fillStyle = color;
                    exportCtx.fillRect(750, legendY - 10, 20, 20);
                    
                    exportCtx.fillStyle = '#333';
                    exportCtx.font = '12px Arial';
                    exportCtx.fillText(`${price} —Ä—É–±.`, 780, legendY + 5);
                    
                    legendY += 30;
                });
                
                // –î–æ–±–∞–≤–ª—è–µ–º –ª–µ–≥–µ–Ω–¥—É —Å—Ç–∞—Ç—É—Å–æ–≤
                legendY += 20;
                exportCtx.fillStyle = '#333';
                exportCtx.font = 'bold 14px Arial';
                exportCtx.fillText('–°—Ç–∞—Ç—É—Å—ã:', 750, legendY);
                legendY += 30;
                
                exportCtx.fillStyle = '#ff6b6b';
                exportCtx.fillRect(750, legendY - 10, 20, 20);
                exportCtx.fillStyle = '#333';
                exportCtx.font = '12px Arial';
                exportCtx.fillText('–ó–∞–Ω—è—Ç–æ', 780, legendY + 5);
                
                // –°–æ–∑–¥–∞–µ–º –∏–º—è —Ñ–∞–π–ª–∞ —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
                const fileName = `–°–∫—Ä–∏–Ω—à–æ—Ç_${eventName.replace(/[^a-zA-Z–∞-—è–ê-–Ø0-9]/g, '_')}.png`;
                
                // –°–æ–∑–¥–∞–µ–º —Å—Å—ã–ª–∫—É –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
                const link = document.createElement('a');
                link.download = fileName;
                link.href = exportCanvas.toDataURL('image/png');
                link.click();
            }

            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ —Ü–µ–Ω
            function savePriceTemplate() {
                // –ü–æ–ª—É—á–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
                const eventNameInput = document.getElementById('eventName').value;
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
                if (!eventNameInput) {
                    alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è');
                    return;
                }
                
                const template = {
                    eventName: eventNameInput,
                    eventDate: document.getElementById('eventDate').value,
                    seats: seats.map(seat => ({
                        id: seat.id,
                        price: seat.price,
                        status: seat.status
                    })),
                    timestamp: new Date().toISOString()
                };
                
                const dataStr = JSON.stringify(template);
                const dataBlob = new Blob([dataStr], {type: 'application/json'});
                
                // –°–æ–∑–¥–∞–µ–º –∏–º—è —Ñ–∞–π–ª–∞ —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
                const fileName = `–®–∞–±–ª–æ–Ω_${eventNameInput.replace(/[^a-zA-Z–∞-—è–ê-–Ø0-9]/g, '_')}.json`;
                
                const link = document.createElement('a');
                link.download = fileName;
                link.href = URL.createObjectURL(dataBlob);
                link.click();
            }

            // –ó–∞–≥—Ä—É–∑–∫–∞ —à–∞–±–ª–æ–Ω–∞ —Ü–µ–Ω
            function loadPriceTemplate(file) {
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    try {
                        const template = JSON.parse(e.target.result);
                        
                        // –ó–∞–ø–æ–ª–Ω—è–µ–º –ø–æ–ª—è –Ω–∞–∑–≤–∞–Ω–∏—è –∏ –¥–∞—Ç—ã
                        if (template.eventName) {
                            document.getElementById('eventName').value = template.eventName;
                        }
                        if (template.eventDate) {
                            document.getElementById('eventDate').value = template.eventDate;
                        }
                        
                        // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ü–µ–Ω—ã –∏ —Å—Ç–∞—Ç—É—Å—ã –∏–∑ —à–∞–±–ª–æ–Ω–∞
                        template.seats.forEach(templateSeat => {
                            const seat = seats.find(s => s.id === templateSeat.id);
                            if (seat) {
                                seat.price = templateSeat.price;
                                seat.status = templateSeat.status || 'free';
                            }
                        });
                        
                        // –û–±–Ω–æ–≤–ª—è–µ–º —á–µ–∫–±–æ–∫—Å –¥–∏—Ä–µ–∫—Ç–æ—Ä—Å–∫–æ–≥–æ —Ä—è–¥–∞
                        const directorRowSeats = seats.filter(seat => seat.row === 11);
                        const allOccupied = directorRowSeats.every(seat => seat.status === 'occupied');
                        directorRowCheckbox.checked = allOccupied;
                        
                        updatePriceLegend();
                        drawHall();
                        alert('–®–∞–±–ª–æ–Ω –∑–∞–ª–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω!');
                    } catch (error) {
                        alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —à–∞–±–ª–æ–Ω–∞: ' + error.message);
                    }
                };
                
                reader.readAsText(file);
            }

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –º—ã—à–∏
            canvas.addEventListener('mousedown', function(e) {
                const pos = getMousePos(e);
                
                if (e.button === 0) {
                    isSelecting = true;
                    selectionStart.x = pos.x;
                    selectionStart.y = pos.y;
                    selectionEnd.x = pos.x;
                    selectionEnd.y = pos.y;
                } else if (e.button === 2) {
                    isDragging = true;
                    lastX = e.clientX;
                    lastY = e.clientY;
                    canvas.style.cursor = 'grabbing';
                }
            });

            canvas.addEventListener('mousemove', function(e) {
                if (isSelecting) {
                    const pos = getMousePos(e);
                    selectionEnd.x = pos.x;
                    selectionEnd.y = pos.y;
                    drawHall();
                } else if (isDragging) {
                    const deltaX = e.clientX - lastX;
                    const deltaY = e.clientY - lastY;
                    
                    offsetX += deltaX;
                    offsetY += deltaY;
                    
                    lastX = e.clientX;
                    lastY = e.clientY;
                    
                    drawHall();
                }
            });

            canvas.addEventListener('mouseup', function(e) {
                if (isSelecting) {
                    const pos = getMousePos(e);
                    selectionEnd.x = pos.x;
                    selectionEnd.y = pos.y;
                    
                    selectSeatsInArea(selectionStart.x, selectionStart.y, selectionEnd.x, selectionEnd.y);
                    
                    isSelecting = false;
                    drawHall();
                } else if (isDragging) {
                    isDragging = false;
                    canvas.style.cursor = 'pointer';
                }
            });

            canvas.addEventListener('contextmenu', function(e) {
                e.preventDefault();
                return false;
            });

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ü–µ–Ω—ã
            setPriceBtn.addEventListener('click', function() {
                const price = parseInt(priceInput.value);
                if (isNaN(price) || price < 0) return;
                
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ü–µ–Ω—É —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–≤–æ–±–æ–¥–Ω—ã—Ö –≤—ã–¥–µ–ª–µ–Ω–Ω—ã—Ö –º–µ—Å—Ç
                selectedSeats.forEach(seat => {
                    if (isSeatPriceable(seat)) {
                        seat.price = price;
                    }
                });
                
                updateSelectionInfo();
                updatePriceLegend();
                drawHall();
            });

            // resetAllBtn.addEventListener('click', function() {
            //     initSeats();
            //     directorRowCheckbox.checked = false;
            //     selectedSeats = [];
            //     updateSelectionInfo();
            //     centerContent();
            //     drawHall();
            // });

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å—Ç–∞—Ç—É—Å–æ–≤ –º–µ—Å—Ç
            setOccupiedBtn.addEventListener('click', () => setSeatsStatus('occupied'));
            setFreeBtn.addEventListener('click', () => setSeatsStatus('free'));

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
            zoomInBtn.addEventListener('click', function() {
                scale *= 1.2;
                drawHall();
            });

            zoomOutBtn.addEventListener('click', function() {
                scale /= 1.2;
                if (scale < 0.1) scale = 0.1;
                drawHall();
            });

            resetZoomBtn.addEventListener('click', function() {
                centerContent();
                drawHall();
            });

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —á–µ–∫–±–æ–∫—Å–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä—Å–∫–æ–≥–æ —Ä—è–¥–∞
            directorRowCheckbox.addEventListener('change', updateDirectorRowStatus);

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞
            exportBtn.addEventListener('click', exportHallImage);
            saveTemplateBtn.addEventListener('click', savePriceTemplate);
            loadTemplateBtn.addEventListener('click', () => templateFile.click());
            templateFile.addEventListener('change', (e) => {
                if (e.target.files.length > 0) {
                    loadPriceTemplate(e.target.files[0]);
                    e.target.value = ''; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ input
                }
            });

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–ª–µ—Å–∞ –º—ã—à–∏ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
            canvas.addEventListener('wheel', function(e) {
                e.preventDefault();
                
                const rect = canvas.getBoundingClientRect();
                const mouseX = e.clientX - rect.left;
                const mouseY = e.clientY - rect.top;
                
                const zoomFactor = e.deltaY > 0 ? 0.9 : 1.1;
                const newScale = scale * zoomFactor;
                
                if (newScale >= 0.1 && newScale <= 5) {
                    offsetX = mouseX - (mouseX - offsetX) * zoomFactor;
                    offsetY = mouseY - (mouseY - offsetY) * zoomFactor;
                    
                    scale = newScale;
                    drawHall();
                }
            });

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
            window.addEventListener('resize', resizeCanvas);
            resizeCanvas();
            initSeats();
            drawHall();
        });
    </script>
</body>
</html>