<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Каталог шрифтов с поддержкой Якутских символов</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary: #4361ee;
            --primary-light: #5a75f0;
            --primary-dark: #3a56d4;
            --secondary: #3f37c9;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #6c757d;
            --success: #4cc9f0;
            --border-radius: 8px;
            --shadow: 0 2px 4px rgba(0,0,0,0.05);
            --transition: all 0.2s ease;
            --bg-color: #f5f7ff;
            --text-color: #212529;
            --card-bg: white;
            --card-border: rgba(0,0,0,0.05);
            --input-bg: #f8fafc;
            --variant-bg: #edf2f7;
            --variant-hover: #e2e8f0;
            --gradient-primary: linear-gradient(90deg, #4361ee, #3a0ca3);
            --gradient-light: linear-gradient(90deg, #5a75f0, #4b1dc7);
            --svg-gradient-start: #4361ee;
            --svg-gradient-end: #3a0ca3;
        }

        [data-theme="dark"] {
            --bg-color: #121212;
            --text-color: #f8f9fa;
            --card-bg: #1e1e1e;
            --card-border: rgba(255,255,255,0.1);
            --input-bg: #2d2d2d;
            --variant-bg: #2d3748;
            --variant-hover: #4a5568;
            --gray: #a0aec0;
            --gradient-primary: linear-gradient(90deg, #6d8aff, #5d3aff);
            --gradient-light: linear-gradient(90deg, #7d97ff, #6d4aff);
            --svg-gradient-start: #6d8aff;
            --svg-gradient-end: #5d3aff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            display: flex;
            min-height: 100vh;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .sidebar {
            width: 300px;
            background-color: var(--card-bg);
            padding: 1.5rem;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            position: sticky;
            top: 0;
            height: 100vh;
        }

        .main-content {
            flex: 1;
            padding: 2rem;
            overflow-y: auto;
        }

        .section-title {
            font-size: 0.9rem;
            background: var(--gradient-light);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.75rem;
            font-weight: 600;
            display: block;
        }

        .preview-textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--card-border);
            border-radius: var(--border-radius);
            font-size: 0.95rem;
            min-height: 80px;
            margin-bottom: 1rem;
            font-family: inherit;
            resize: none;
            line-height: 1.25;
            overflow: hidden;
            background-color: var(--input-bg);
            color: var(--text-color);
        }

        .preview-textarea:focus {
            outline: none;
            border-color: var(--primary);
        }

        .preview-controls-row {
            display: flex;
            gap: 0.5rem;
        }

        .font-size-select, .search-input {
            flex: 1;
            padding: 0.75rem;
            border: 1px solid var(--card-border);
            border-radius: var(--border-radius);
            font-size: 0.95rem;
            background: var(--input-bg);
            color: var(--text-color);
        }

        .apply-btn, .filter-btn.active, .variant-btn.active, .download-btn {
            background: var(--gradient-primary);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            user-select: none;
        }

        .apply-btn {
            padding: 0 1rem;
        }

        .apply-btn:hover, .download-btn:hover {
            background-color: var(--primary-dark);
        }

        .search-container {
            position: relative;
        }

        .search-input {
            padding-left: 2.5rem;
            width: 100%;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(67, 97, 238, 0.1);
        }

        .search-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
        }

        .filter-section {
            margin-bottom: 0.5rem;
        }

        .filter-options {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .filter-btn {
            padding: 0.6rem 1rem;
            border-radius: var(--border-radius);
            background: none;
            border: none;
            text-align: left;
            font-size: 0.95rem;
            cursor: pointer;
            transition: var(--transition);
            color: var(--text-color);
            user-select: none;
        }

        .filter-btn:hover {
            background-color: var(--variant-hover);
        }

        .filter-btn.active {
            color: white;
        }

        .font-list {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .theme-toggle {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 50px;
            height: 26px;
            border-radius: 50px;
            background: var(--variant-bg);
            cursor: pointer;
            margin: 0 auto;
        }

        .theme-toggle i {
            font-size: 14px;
            padding: 0 5px;
            color: var(--text-color);
            z-index: 1;
        }

        .theme-toggle .toggle-ball {
            position: absolute;
            width: 20px;
            height: 20px;
            background: var(--gradient-light);
            border-radius: 50%;
            left: 2px;
            transition: transform 0.3s ease;
        }

        [data-theme="dark"] .theme-toggle .toggle-ball {
            transform: translateX(25px);
        }

        .font-item {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .font-item:hover {
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .font-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: .5rem;
            user-select: none;
        }

        .font-name {
            font-size: 1.4rem;
            font-weight: 700;
            background: var(--gradient-light);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .font-name span {
            font-weight: 400;
            font-size: .75rem;
            vertical-align: middle;
            color: var(--gray);
        }

        .font-variants {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-bottom: .5rem;
        }

        .variant-btn {
            padding: 0.4rem 0.8rem;
            border-radius: var(--border-radius);
            background-color: var(--variant-bg);
            border: none;
            color: var(--text-color);
            font-size: 0.8rem;
            cursor: pointer;
            transition: var(--transition);
            user-select: none;
        }

        .variant-btn:hover {
            background-color: var(--variant-hover);
        }

        .variant-btn.active {
            color: white;
        }

        .font-preview {
            line-height: 1;
            transition: var(--transition);
        }

        .font-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1rem;
            font-size: 0.85rem;
            color: var(--gray);
        }

        .download-btn {
            padding: 0.5rem 1rem;
            font-size: 0.85rem;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            -webkit-text-fill-color: #fff;
        }

        .download-btn:disabled {
            background-color: var(--gray);
            cursor: not-allowed;
        }

        .category-tag {
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        [data-theme="dark"] .category-tag {
            color: #fff;
        }
        .category-sans-serif {
            background-color: rgba(227, 242, 253, 0.2);
            color: #1976d2;
        }

        .category-serif {
            background-color: rgba(232, 245, 233, 0.2);
            color: #388e3c;
        }

        .category-monospace {
            background-color: rgba(255, 243, 224, 0.2);
            color: #ffa000;
        }

        .category-display {
            background-color: rgba(243, 229, 245, 0.2);
            color: #8e24aa;
        }

        .category-handwriting {
            background-color: rgba(224, 247, 250, 0.2);
            color: #00acc1;
        }

        svg.defs-only {
            position: absolute;
            width: 0;
            height: 0;
            overflow: hidden;
        }

        .logo-svg {
            max-width: 100%;
            margin: 0 50px;
            fill: url(#svg-gradient);
        }

        @media (max-width: 768px) {
            body {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                position: static;
                height: auto;
                border-bottom: 1px solid var(--card-border);
            }
            
            .main-content {
                padding: 1.5rem;
            }
            
            .logo-svg {
                margin: 0 auto;
                display: block;
            }
        }

        .spinner {
            animation: rotate 1s linear infinite;
            display: none;
        }

        @keyframes rotate {
            100% { transform: rotate(360deg); }
        }

        .loading {
            text-align: center;
            padding: 2rem;
            color: var(--gray);
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <header>
            <svg class="defs-only">
                <defs>
                    <linearGradient id="svg-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" stop-color="var(--svg-gradient-start)" />
                        <stop offset="100%" stop-color="var(--svg-gradient-end)" />
                    </linearGradient>
                </defs>
            </svg>
            <svg class="logo-svg" viewBox="0 0 790.91 313.35">
                <path d="M624.95 106.51c-.65-10.77.86-23.44-.79-36.07-.9-6.86-3.79-12.29-9.41-16.32-1.16-.83-2.94-1.6-2.42-3.41s2.45-1.28 3.86-1.28c15.5 0 31 0 46.49.1 1.67 0 4.05-1 4.82 1.33.62 1.84-1.24 2.95-2.51 4-6.51 5.15-7 12.63-7.49 19.92-1.31 19.12-.91 38.29-.85 57.45a36.57 36.57 0 0 0 .71 6.42c1.36 7.39 5 11.11 11.42 11.88 7.28.88 14.27-2.67 17-8.82a20.34 20.34 0 0 0 2.08-8.69c-.27-11.81.52-23.62-.57-35.45-.66-7.11-.2-14.32-.2-21.48 0-9.1-2.13-17.19-10.31-22.55-1-.69-2.67-1.39-2-3s2.34-1 3.58-1q23.76-.07 47.5 0c1.25 0 2.88-.47 3.55 1.07s-.44 2.59-1.5 3.37c-5.41 4-7.37 9.66-8 16a403.83 403.83 0 0 0-.45 68.32c.63 7.91 6.16 12.2 13.35 12.16 7 0 12.4-4.7 13.75-12.1a35 35 0 0 0 .33-6c0-18 0-36 .15-54 .1-10.11-1.45-19.34-10.87-25.27-.86-.54-1.81-1.26-1.59-2.33.31-1.54 1.8-1.26 2.88-1.26h45c2.34 0 3.8.9 4 3.42.52 6.3 1.17 12.58 1.61 18.89.17 2.42-1 3.58-3.7 3.36-6.93-.57-7.84.32-7.85 7.17 0 18 .08 36 0 54-.13 18.85-10.33 33.55-27.27 38.08-15.48 4.15-30.47 2.43-43.84-7.13-3.3-2.37-5.58-2.23-8.83.07-15.79 11.17-33.15 11.61-50.5 5.21-14.39-5.31-20.52-17.42-21.11-32.23-.35-10.62-.02-21.3-.02-33.83zM2.91 145.87v-23c0-1.57-.75-3.77 1-4.56 2.1-.95 3.15 1.38 4.3 2.61 10.93 11.73 23.78 20.27 39.57 23.86 12 2.71 23.92 3.88 35.62-1.35 6.61-3 10.93-7.84 11.35-15.14s-3.68-12.23-9.49-15.84c-9.14-5.63-19.39-8.69-29.42-12.21-12.91-4.53-25.4-9.79-36.6-17.91-26.68-19.36-24.06-59.83 5-75.44 8.07-4.33 16.32-6.92 26-6.78 4.21.12 6.31-.11 9.44 0 13.16-.39 26.08.19 38.9 3.6 6.36 1.69 12.2.44 18-1.94 3.87-1.6 5.17-.24 5.15 3.63-.06 15.66 0 31.32 0 47 0 1.4.57 3.32-1.27 3.93s-3.21-.66-4.28-2a78.25 78.25 0 0 0-20.3-17.55c-9.72-5.84-19.93-10.12-31.51-9.5-7.09.38-13.84 2.17-19 7.63-6.61 7.06-5.62 17.23 1.93 23.23 8.69 6.92 19.22 9.71 29.31 13.48 12.18 4.62 24.39 9.25 35.45 16.65 27.45 18.49 25.25 65.86-8 80.9-16.25 7.34-33 8.06-50.3 6.39-8.8-.85-17.32-3-25.91-5-6.13-1.4-12.18.13-18.12 2.1-6.55 2.17-6.76 1.89-6.78-4.8-.06-7.33-.04-14.66-.04-21.99z"/>
                <path d="M2.52 145.87v-23c0-1.57-.76-3.77 1-4.56 2.1-.95 3.15 1.38 4.3 2.61 10.93 11.73 23.78 20.27 39.57 23.86 12 2.71 23.92 3.88 35.62-1.35 6.61-3 10.93-7.84 11.35-15.14s-3.7-12.24-9.56-15.85c-9.14-5.63-19.39-8.69-29.42-12.21-12.91-4.53-25.4-9.79-36.6-17.91-26.68-19.36-24.06-59.83 5-75.44C31.85 2.55 40.1-.04 49.78.1c4.21.12 6.31-.11 9.44 0 13.16-.39 26.08.19 38.9 3.6 6.36 1.69 12.2.44 18-1.94 3.87-1.6 5.16-.24 5.15 3.63-.06 15.66 0 31.32 0 47 0 1.4.57 3.32-1.27 3.93s-3.21-.66-4.28-2a78.25 78.25 0 0 0-20.3-17.55c-9.72-5.84-19.93-10.12-31.51-9.5-7.09.38-13.84 2.17-19 7.63-6.61 7.06-5.62 17.23 1.93 23.23 8.69 6.92 19.22 9.71 29.3 13.48 12.26 4.63 24.47 9.26 35.53 16.66 27.45 18.49 25.24 65.86-8 80.9-16.25 7.34-33 8.06-50.31 6.39-8.8-.85-17.32-3-25.91-5-6.13-1.4-12.17.13-18.11 2.1-6.55 2.17-6.76 1.89-6.78-4.8-.06-7.33-.04-14.66-.04-21.99zM397.61 122.4c0 20.65.1 41.31-.06 62a125.31 125.31 0 0 0 1.27 15.89c.64 5.36 2.74 10.27 7.69 13.42 1.65 1.06 3.54 2.44 2.78 4.81-.85 2.62-3.35 1.68-5.16 1.69q-21.74.12-43.47 0c-1.85 0-4.22.74-4.95-2.07-.63-2.45 1.11-3.56 2.71-4.83a19 19 0 0 0 7.4-14.67c.32-9.82.11-19.65.23-29.48 0-3.83-1.19-3.11-3.72-1.63-20 11.75-40.39 12.77-60.36.34-14.84-9.23-20.84-24.08-22.9-40.74a99.08 99.08 0 0 1 3.71-43.33c8.41-25.82 33-40.23 59.9-35.76a97.09 97.09 0 0 1 25 8c3.76 1.75 7.23 2 11 0 4-2.09 8.09-3.89 12.11-5.87 5.37-2.65 6.77-1.84 6.79 4.29q.06 34 0 67.95zm-32-10h.28c0-4.5.09-9 0-13.49-.29-13.13-9.17-23.16-21.72-24.65-15.25-1.81-26 4.66-29.52 18.32-3.31 12.76-3.13 25.79-.66 38.6 2.66 13.87 12.31 20.66 27.18 20.31 13.39-.32 22.27-7.67 24.3-21.13.9-5.83.17-11.93.17-17.93zM521.61 117.49c.46 11.69-1.05 25.39 1.44 38.95.92 5.06 2.69 9.6 7 12.76.92.68 2.16 1.44 1.78 2.74-.48 1.66-2.17 1.26-3.42 1.27-10.5 0-21-.06-31.49.07-3.48 0-5-1.63-5-4.76 0-5-1.89-4.63-5.2-2.22-14.46 10.57-30.55 12.57-47.46 7.77-28.24-8.11-28.28-40.95-15.29-55 9.06-9.78 20.56-15.1 33.13-18.43 9.8-2.6 19.57-5.38 29.74-6.24 2.58-.21 3.22-1.64 3.24-4 .08-9-6.4-16.07-16.13-17.17-15.1-1.69-28.32 2.3-39.26 13.14-1.12 1.1-2.17 3.18-4 2.35-1.55-.71-1.6-2.83-1.58-4.49q.12-11.46.42-22.94c.06-2.53 1.89-3.76 3.89-4.75 19.64-9.74 40-12.26 61-5.2 17.58 5.91 27.16 19.74 27.18 38.23.02 8.65.01 17.3.01 27.92zm-30.86 9.58c-.24-3.51-.49-6.81-.71-10.12-.13-1.86-1.06-2.83-2.93-2.38-11.14 2.72-22.48 5.05-31.55 12.78-6.36 5.42-8.18 12.39-5.28 18.65 2.37 5.11 10.59 8.42 17.83 7.18 16.07-2.77 22.15-9.8 22.64-26.11zM254.61 119.11c.62 9.74-.94 21.56.9 33.34 1.08 7 3 13.31 9.32 17.39.85.55 1.76 1.36 1.49 2.4-.39 1.47-1.74 1.1-2.92 1.1-10.32-.07-20.65-.16-31-.08-3.44 0-5.46-.46-5.74-4.74-.37-5.59-1.25-5.76-5.72-2.58-15 10.67-31.37 13.18-48.81 7.77-13.38-4.14-21.1-13.67-23-27.41s3.22-24.77 14.23-33.12c11.74-8.89 25.64-12.36 39.59-15.59 5.65-1.31 11.41-2.21 17.14-3.11 2.9-.45 3.84-1.94 3.82-4.75a16.39 16.39 0 0 0-11.44-15.36c-13.25-4-25.64-1.88-37.09 5.74a114.87 114.87 0 0 0-9.49 7.29c-2.72 2.24-3.93 1.31-4-1.77-.09-8.16 0-16.32 0-24.48a4.19 4.19 0 0 1 2.44-4c23.51-11.42 47.34-14.32 71.25-1.53 13.15 7 18.41 19.16 18.91 33.5.38 9.27.12 18.61.12 29.99zm-30.69 7.12v-9c0-2.41-1.22-3.33-3.5-2.83-10.71 2.39-21.33 5-30.52 11.44-6.43 4.52-9.33 11.57-7.33 18 1.79 5.77 8.08 9.57 15.9 9.6 16.47.1 25.49-9.57 25.45-27.21zM573.98 1.78h26.49c1.59 0 3.54-.33 4 1.94.42 1.87-.51 3.16-2 4.21-10 7.13-12.67 17.82-12.77 29-.33 35.32-.27 70.64 0 106 .06 10.66 2.71 20.55 12.82 26.59 1 .62 2.09 1.31 1.57 2.7-.42 1.13-1.6 1-2.58 1q-26.49 0-53-.1c-1.11 0-2.5.21-3-1.15-.66-1.62.59-2.48 1.69-3.2 8.19-5.31 10.47-13.55 10.52-22.48.19-35 .36-70 .05-104.94-.1-11.06-2.16-21.92-11-30.09A36.9 36.9 0 0 0 540.64 7c-1.09-.66-2.63-1.21-2.31-2.89s2-1.45 3.23-1.65c10.77-1.59 21.62-.37 32.42-.68zM485.76 239.87c5.25-2.88 9.76-5.52 15.11-6.48 19.76-3.53 37 9.11 39.82 29 1.3 9.11 1 17.94-2.13 26.54-3.66 10.11-10.46 17.33-20.92 20.51a42.83 42.83 0 0 1-12 2c-7.11.05-10.9-2.42-17-4.67-1.72-.63-3.62-3.41-4.46.88-.31 1.61-2.08 1.44-3.38 1.44q-10 .06-20 0c-.94 0-2.14.24-2.62-.9s.64-1.74 1.39-2.3c4.42-3.32 5.71-7.9 5.7-13.18q-.09-36.21 0-72.42c0-5.93-1.14-11.24-6.05-15.15-.76-.6-1.61-1.35-1.24-2.49s1.55-1.13 2.51-1.13c9.82 0 19.64-.05 29.47 0 2 0 3.78.93 1.62 2.9-4.54 4.13-5 9.49-5.46 15-.63 6.7-.43 13.27-.36 20.45zm34.34 33c0-5.16.26-10.32-2.07-15.19-3.4-7.14-10-10.51-18.65-9.4-7.94 1-12 4.8-13.18 13.21a72.47 72.47 0 0 0 .5 23.87c1 5.23 4.33 8.92 9.48 9.88 12.82 2.4 23.17-.94 23.91-17.87.07-1.5.01-3 .01-4.5zM718.17 255.57v-37c0-5.13-1.57-9.44-5.55-12.81-.94-.8-2.51-1.56-1.76-3.16s2.32-1.05 3.59-1.06c6.82 0 13.65.06 20.48-.05 3.14-.06 3.79 1.27 3.73 4.25-.27 16.15-.32 32.3-.38 48.45 0 1.4-.76 3.39.84 4.08s2.56-1.17 3.6-2.13c3.41-3.17 6.74-6.44 10.11-9.66 2.62-2.5 4.59-5.27 4.21-9.16-.24-2.45.82-3.78 3.39-3.77h25.48c1 0 2.17-.15 2.57 1 .54 1.61-.85 2.4-1.79 3.24-7.92 7.14-15.71 14.42-23.87 21.25-3.65 3.06-3.73 5.16-.87 8.9 9.52 12.41 17.87 25.68 27.86 37.75 1.7 2.07 1.47 3.38-1.39 3.4q-12.74.11-25.48 0c-2.23 0-3.32-1.08-1.56-3.06 2-2.21 1.53-4.19 0-6.28l-18.12-24.43c-.59-.8-1.15-1.8-2.33-1.52a2.68 2.68 0 0 0-2.18 2.46c-.14 8.12-1.25 16.3.9 24.32a11 11 0 0 0 3.74 5.2c.71.63 1.74 1.27 1.21 2.45s-1.68.94-2.63.94h-28c-1 0-2.15.23-2.61-.93s.58-1.82 1.32-2.4c4.34-3.42 5.5-8.05 5.46-13.31-.09-12.33 0-24.65 0-37z"/>
                <path d="M318.74 207.56h24.41c3.08 0 2.67 1.95 2.65 4.09-.15 15.16-.17 30.32-.22 45.48 0 .65.11 1.31.28 3.19 6.64-6.85 13.4-12.34 18.1-19.82a2.44 2.44 0 0 0 .5-1.4c-1.11-7.2 3.73-6.56 8.34-6.5 6.83.11 13.66 0 20.49.06 1.42 0 3.29-.58 4.05 1.1s-1 2.63-2 3.58c-8.6 7.87-17.13 15.82-25.93 23.46-2.67 2.32-2.74 3.91-.71 6.57 9.77 12.84 18.24 26.66 29 38.73 1.86 2.08 1 3-1.31 3q-13.5.12-27 0c-2.39 0-3.9-1-1.5-3.17 2.18-2 1.58-3.78.17-5.68l-18-24c-.67-.88-1.35-2.1-2.8-1.44a3 3 0 0 0-1.61 2.9c-.23 7.16-.42 14.34 1.13 21.39.63 2.85 2.56 5 4.74 6.88 1.91 1.68 1.41 3.06-1.1 3.08-9.83.1-19.66.12-29.49 0-3.16 0-2.83-1.94-1-3.46 5.31-4.47 5.93-10.5 5.93-16.78v-57c.06-8.52-.3-16.95-7.12-24.26zM76.17 264.87v-17.85c0-4.19-1.06-7.9-4.49-10.64-.78-.61-1.76-1.3-1.49-2.4.35-1.46 1.75-1.33 2.89-1.34h26c1.13 0 2.46-.17 3.12 1.08s-.31 2.2-1.14 3c-3.66 3.52-4.48 8-4.49 12.82 0 10.83-.09 21.66 0 32.49.06 7.93 2.65 11.55 8.67 12.55 8.48 1.4 15.89-2.07 18.27-8.7a21.14 21.14 0 0 0 1.38-7.33c-.06-9.16.06-18.33-.11-27.49-.11-6.09-1.84-11.51-7.66-14.73-1-.53-2.34-1-1.72-2.56.45-1.09 1.61-1.1 2.6-1.1h31c1 0 2.11.14 2.47 1.28s-.5 1.86-1.31 2.44c-4.64 3.28-5.49 8.22-5.54 13.29q-.2 21.24 0 42.49c0 5.07.9 9.93 5 13.63 2.11 1.89 1.41 3.27-1.34 3.31-6.5.08-13 0-19.49 0-1.4 0-3-.26-3.21-1.78-.55-4.79-2.65-2.64-4.81-1.33-9.81 6-20.15 6.54-30.69 2.41-7.85-3.08-11.94-9.27-13.12-17.47-1.22-8.39-.53-16.91-.79-26.07zM233.95 268.38c-.43-6.69.54-14.19-.54-21.67-.57-3.95-1.8-7.4-5.09-9.92-.89-.68-2.09-1.49-1.73-2.8s1.81-1.3 3-1.3c9.16 0 18.33-.06 27.49 0 2.8 0 3.85 1.2 1.68 3.63-3.59 4-4.4 8.74-4.33 13.92.13 10.83 0 21.66.06 32.49.07 7.75 3.46 11.92 10 12.61 7 .75 15.55-4.26 16.36-10.39a156.76 156.76 0 0 0 0-41.34c-.45-3.34-2.78-5.58-5.36-7.55-.77-.59-1.68-1.26-1.12-2.46.42-.9 1.35-.91 2.16-.91 9.5 0 19-.09 28.49 0 3.14 0 3.53 1.8 1.41 3.74-4.27 3.92-4.73 9-4.77 14.22-.09 13.17 0 26.33 0 39.5 0 5.76.58 11.3 5.16 15.61 2 1.85 1.48 3.33-1.36 3.36-6.5.07-13 0-19.5 0-1 0-2.32-.12-2.57-1.16-1.46-6.24-4.31-2.43-6.85-1-10.1 5.55-20.46 5.61-30.71.78-8.09-3.81-11.27-11.06-11.68-19.55-.44-6.32-.2-12.69-.2-19.81zM58.47 245.29v9c0 1.14.1 2.47-1.11 3.12-1.55.82-2.47-.48-3.38-1.37-5-4.87-10.78-8.36-17.77-9.49-4-.64-8-.91-11.81.66a5.82 5.82 0 0 0-4 5.23c-.17 2.44 1.11 4.08 3.1 5.29 4.31 2.61 9.19 3.87 13.81 5.74s9 3.45 13.06 6.17c7.25 4.87 11 11.44 10.11 20.3-.91 8.6-5.82 14.35-13.51 17.77-9.16 4.08-18.73 4.16-28.42 2.43-5-.9-10-2.79-15.23-1.25-2.06.6-3.14-.85-3.17-2.8-.08-6 0-12 0-18 0-1 .06-2.16 1.2-2.51 1.55-.48 2.38.85 3.35 1.7 8.24 7.23 17.75 10.14 28.63 8.43 3.72-.59 6.76-2.11 7.53-6.16.82-4.29-1.9-6.51-5.33-7.94-4.76-2-9.63-3.69-14.4-5.64a75.17 75.17 0 0 1-9.14-4.1c-7.54-4.31-13-10.15-11.84-19.62 1.2-9.68 7.42-15.37 16.19-18.44 8.4-2.95 17-2.73 25.64-.85 4.13.9 8.2 1.41 12.32.17 2.94-.88 4.06.53 4.12 3.21.07 3 0 6 0 9zM657.58 246.32c0 2.49.09 5 0 7.49-.08 1.55.79 3.69-1.19 4.43-1.6.6-2.53-1.23-3.62-2.19-5.87-5.18-12.51-8.18-20.45-7.88-8.58.37-14 4.35-16.61 12.59a41 41 0 0 0-.64 20.76c2.71 12.8 13.79 16.43 27.27 13.42a24.25 24.25 0 0 0 11.25-6.23c.8-.75 1.6-2 2.95-1.31s.88 2 1 3.11a6.68 6.68 0 0 1 0 1c-.42 14 3 13.14-12.66 18.81-4.23 1.54-8.14 3.5-12.81 2.92-20.25-2.54-35.43-12.86-37.86-34.18-1.42-12.4.41-24.37 9.11-34.2 8.91-10.06 20.45-13.22 33.42-11.89 5.91.61 11.7 2.75 17.74.64 2.15-.76 3 .69 3 2.71v10zM186.53 243.63c6.93-6.44 13.25-10.93 21.48-11.71 7.39-.69 8.43.24 8.48 7.7v10.49c0 3.78-1.29 4.43-4.44 2.3-4.84-3.27-10-4.26-15.56-1.67-5.06 2.34-7.86 6.13-7.91 11.66-.1 11.33-.07 22.65 0 34a12.25 12.25 0 0 0 4.69 9.56 2.93 2.93 0 0 1 1.14 2c-.13 1.26-1.41 1.21-2.37 1.21-9.16 0-18.33.07-27.49 0-3.16 0-2.9-1.69-1.09-3.37 3.77-3.49 4.48-8 4.48-12.77v-42c0-5.37-.18-10.63-4.56-14.75-2-1.88-1-3.46 1.52-3.51 6.16-.14 12.33-.08 18.49 0 2.32 0 3.13 1.54 3.12 3.66zM557.96 272.78c0-6-.08-12 0-18 .12-6.68-.71-13-6.19-17.69-.73-.62-1.54-1.43-1-2.55s1.66-1 2.61-1c9.31 0 18.62-.06 27.93 0 2.81 0 3.33 1.48 1.36 3.36-4.43 4.2-4.9 9.72-5 15.18q-.32 19.2 0 38.41c.08 5.68.81 11.33 5.57 15.45a3 3 0 0 1 1.16 2c-.15 1.28-1.45 1.16-2.39 1.16h-28.44c-.95 0-2.13.09-2.43-1.18-.22-.94.57-1.5 1.21-2 4.89-3.78 5.67-9.08 5.61-14.76-.06-6.07-.01-12.22 0-18.38zM694.59 266.78c.49 8.38-.69 18.54.59 28.66.52 4.14 1.7 7.76 5 10.52.73.61 1.82 1.32 1.08 2.41a2.94 2.94 0 0 1-2.17.78c-9.32.05-18.64 0-28 0-.79 0-1.76.07-2.16-.84-.55-1.23.56-1.79 1.24-2.42a15.59 15.59 0 0 0 5-12.08q0-21.21-.08-42.43c0-5.79-1.67-10.8-6.57-14.37-.76-.56-1.89-1.16-1.58-2.29.41-1.48 1.88-1.14 3-1.14 6.83 0 13.65.06 20.47-.06 3.31-.06 4.31 1.46 4.28 4.56-.17 8.99-.1 17.97-.1 28.7zM682.38 201.52c7 0 11.81 4.54 11.92 11.12a11.74 11.74 0 0 1-12.04 11.87c-6.94-.1-12.19-5.2-12.15-11.78.02-6.95 4.71-11.22 12.27-11.21zM567.11 201.53c7 0 12 4.53 12.17 11s-5.1 11.85-12.08 12a11.62 11.62 0 0 1-11.94-11.55c0-6.48 5.09-11.42 11.85-11.45z"/>
            </svg>
        </header>

        <div class="search-container">
            <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8"></circle>
                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
            </svg>
            <input type="text" id="search" class="search-input" placeholder="Поиск шрифтов...">
        </div>
        
        <div class="preview-control-section">
            <span class="section-title">Текст фразы</span>
            <textarea id="global-preview-text" class="preview-textarea" placeholder="Введите текст для проверки шрифтов..." spellcheck="false">Ааспыкка аһы көрдөрүмэ, сыгынньахха таҥаһы көрдөрүмэ, тоҥмукка уоту көрдөрүмэ.</textarea>
            
            <span class="section-title">Размер текста</span>
            <div class="preview-controls-row">
                <select id="global-font-size" class="font-size-select">
                    <option value="16px">16px</option>
                    <option value="18px">18px</option>
                    <option value="24px">24px</option>
                    <option value="30px">30px</option>
                    <option value="36px" selected>36px</option>
                    <option value="48px">48px</option>
                    <option value="60px">60px</option>
                    <option value="72px">72px</option>
                </select>
                <button id="apply-preview" class="apply-btn">Применить</button>
            </div>
        </div>
        
        <div class="filter-section">
            <span class="section-title">Категории</span>
            <div class="filter-options">
                <button class="filter-btn active" data-category="all">Все шрифты</button>
                <button class="filter-btn" data-category="sans-serif">Без засечек</button>
                <button class="filter-btn" data-category="serif">С засечками</button>
                <button class="filter-btn" data-category="monospace">Моноширинные</button>
                <button class="filter-btn" data-category="display">Декоративные</button>
                <button class="filter-btn" data-category="handwriting">Рукописные</button>
            </div>
        </div>

        <div class="theme-toggle" id="themeToggle" title="Переключить тему">
            <i class="fas fa-sun"></i>
            <i class="fas fa-moon"></i>
            <span class="toggle-ball"></span>
        </div>
    </div>
    
    <div class="main-content">
        <div class="font-list" id="font-list">
            <div class="loading">Загрузка шрифтов...</div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Конфигурация приложения
            const config = {
                previewText: 'Ааспыкка аһы көрдөрүмэ, сыгынньахха таҥаһы көрдөрүмэ, тоҥмукка уоту көрдөрүмэ.',
                fontSize: '36px',
                fonts: []
            };
            
            // Инициализация элементов управления
            const elements = {
                previewTextarea: document.getElementById('global-preview-text'),
                fontSizeSelect: document.getElementById('global-font-size'),
                applyBtn: document.getElementById('apply-preview'),
                searchInput: document.getElementById('search'),
                categoryBtns: document.querySelectorAll('[data-category]'),
                fontList: document.getElementById('font-list'),
                themeToggle: document.getElementById('themeToggle')
            };
            
            // Установка обработчиков событий
            function setupEventListeners() {
                elements.previewTextarea.addEventListener('input', function() {
                    config.previewText = this.value || 'Айыы сирэ аһаҕас, күн сирэ көҥдөй.';
                });
                
                elements.applyBtn.addEventListener('click', function() {
                    config.fontSize = elements.fontSizeSelect.value;
                    updateAllFontPreviews();
                });
                
                elements.searchInput.addEventListener('input', debounce(() => filterFonts(), 300));
                
                elements.categoryBtns.forEach(btn => {
                    btn.addEventListener('click', function() {
                        elements.categoryBtns.forEach(b => b.classList.remove('active'));
                        this.classList.add('active');
                        filterFonts();
                    });
                });
                
                setupThemeToggle();
            }
            
            // Загрузка данных о шрифтах
            function loadFonts() {
                fetch('fonts.json')
                    .then(response => response.json())
                    .then(data => {
                        config.fonts = data.fonts;
                        displayFonts(config.fonts);
                    })
                    .catch(handleFontLoadError);
            }
            
            // Отображение списка шрифтов
            function displayFonts(fonts) {
                if (fonts.length === 0) {
                    elements.fontList.innerHTML = `
                        <div style="text-align: center; padding: 2rem; color: var(--gray);">
                            <h3 style="margin-bottom: 1rem;">Шрифты не найдены</h3>
                            <p>Попробуйте изменить параметры фильтрации</p>
                        </div>
                    `;
                    return;
                }
                
                elements.fontList.innerHTML = '';
                
                fonts.forEach(font => {
                    const defaultVariant = font.variants.find(v => v.weight === "400" && v.style === "normal") || font.variants[0];
                    const categoriesHTML = Array.isArray(font.category) ? 
                        font.category.map(c => `<span class="category-tag category-${c}">${getCategoryName(c)}</span>`).join(' ') :
                        `<span class="category-tag category-${font.category}">${getCategoryName(font.category)}</span>`;
                    
                    const variantsHTML = font.variants.map(v => {
                        const isActive = (v.weight === defaultVariant.weight && v.style === defaultVariant.style);
                        return `
                            <button class="variant-btn ${isActive ? 'active' : ''}" 
                                    data-family="${font.family}"
                                    data-weight="${v.weight}"
                                    data-style="${v.style}">
                                ${getWeightName(v.weight)}${v.style === 'italic' ? ' Italic' : ''}
                            </button>
                        `;
                    }).join('');
                    
                    const fontItem = document.createElement('div');
                    fontItem.className = 'font-item';
                    fontItem.dataset.fontFamily = font.family;
                    fontItem.innerHTML = `
                        <div class="font-header">
                            <div class="font-name">${font.name} | 
                                <span>Начертаний (${font.variants.length})</span>
                                <button class="download-btn" data-family="${font.family}">
                                    <i class="fas fa-spinner spinner"></i>
                                    <i class="fas fa-download"></i>
                                </button>
                            </div>
                            <div>${categoriesHTML}</div>
                        </div>
                        
                        <div class="font-variants">
                            ${variantsHTML}
                        </div>
                        
                        <div class="font-preview" 
                             style="font-family: '${font.family}-${defaultVariant.weight}-${defaultVariant.style}';
                                    font-weight: ${defaultVariant.weight};
                                    font-style: ${defaultVariant.style};
                                    font-size: ${config.fontSize}">
                            ${config.previewText}
                        </div>
                    `;
                    
                    setupFontControls(fontItem, font);
                    elements.fontList.appendChild(fontItem);
                });
                
                setupLazyFontLoading(fonts);
            }
            
            // Настройка элементов управления для каждого шрифта
            function setupFontControls(fontItem, font) {
                const variantBtns = fontItem.querySelectorAll('.variant-btn');
                const previewBlock = fontItem.querySelector('.font-preview');
                const downloadBtn = fontItem.querySelector('.download-btn');
                
                variantBtns.forEach(btn => {
                    btn.addEventListener('click', function() {
                        variantBtns.forEach(b => b.classList.remove('active'));
                        this.classList.add('active');
                        updateFontPreview(this, previewBlock);
                    });
                });
                
                downloadBtn.addEventListener('click', () => handleDownload(font.family, font.variants, downloadBtn));
            }
            
            // Обновление предпросмотра шрифта
            function updateFontPreview(variantBtn, previewBlock) {
                const family = variantBtn.dataset.family;
                const weight = variantBtn.dataset.weight;
                const style = variantBtn.dataset.style;
                
                previewBlock.style.fontFamily = `'${family}-${weight}-${style}'`;
                previewBlock.style.fontWeight = weight;
                previewBlock.style.fontStyle = style;
                previewBlock.style.fontSize = config.fontSize;
                previewBlock.textContent = config.previewText;
            }
            
            // Обновление всех предпросмотров
            function updateAllFontPreviews() {
                document.querySelectorAll('.font-item').forEach(fontItem => {
                    const activeVariant = fontItem.querySelector('.variant-btn.active');
                    const previewBlock = fontItem.querySelector('.font-preview');
                    
                    if (activeVariant && previewBlock) {
                        updateFontPreview(activeVariant, previewBlock);
                    }
                });
            }
            
            // Обработка скачивания шрифта
            async function handleDownload(familyName, variants, downloadBtn) {
                const spinner = downloadBtn.querySelector('.spinner');
                const downloadIcon = downloadBtn.querySelector('.fa-download');
                
                spinner.style.display = 'inline-block';
                downloadIcon.style.display = 'none';
                downloadBtn.disabled = true;
                
                try {
                    await downloadFontFamily(familyName, variants);
                } catch (error) {
                    console.error('Ошибка скачивания:', error);
                    alert('Не удалось скачать шрифты');
                } finally {
                    spinner.style.display = 'none';
                    downloadIcon.style.display = 'inline-block';
                    downloadBtn.disabled = false;
                }
            }
            
            // Скачивание семейства шрифтов
            async function downloadFontFamily(familyName, variants) {
                try {
                    const JSZip = await loadJSZip();
                    const zip = new JSZip();
                    const fontFolder = zip.folder(familyName);
                    
                    await Promise.all(variants.map(async variant => {
                        const response = await fetch(`fonts/${variant.file}`);
                        if (!response.ok) throw new Error(`Не удалось загрузить ${variant.file}`);
                        const blob = await response.blob();
                        fontFolder.file(variant.file, blob);
                    }));
                    
                    const content = await zip.generateAsync({ type: 'blob' });
                    const url = URL.createObjectURL(content);
                    const link = document.createElement('a');
                    
                    link.href = url;
                    link.download = `${familyName.toLowerCase().replace(/\s+/g, '-')}-family.zip`;
                    document.body.appendChild(link);
                    link.click();
                    
                    setTimeout(() => {
                        document.body.removeChild(link);
                        URL.revokeObjectURL(url);
                    }, 100);
                } catch (error) {
                    console.error('Ошибка создания архива:', error);
                    throw error;
                }
            }
            
            // Ленивая загрузка шрифтов
            function setupLazyFontLoading(fonts) {
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const fontItem = entry.target;
                            const fontId = fontItem.dataset.fontFamily;
                            const font = fonts.find(f => f.family === fontId);
                            
                            if (font && !fontItem.dataset.loaded) {
                                loadFontFace(font);
                                fontItem.dataset.loaded = true;
                                observer.unobserve(fontItem);
                            }
                        }
                    });
                }, { threshold: 0.1 });

                document.querySelectorAll('.font-item').forEach(item => observer.observe(item));
            }
            
            // Загрузка шрифта
            function loadFontFace(font) {
                let cssRules = '';
                
                font.variants.forEach(variant => {
                    cssRules += `
                        @font-face {
                            font-family: '${font.family}-${variant.weight}-${variant.style}';
                            src: url('fonts/${variant.file}') format('${variant.format || 'truetype'}');
                            font-weight: ${variant.weight};
                            font-style: ${variant.style};
                        }
                    `;
                });
                
                const styleElement = document.createElement('style');
                styleElement.textContent = cssRules;
                document.head.appendChild(styleElement);
            }
            
            // Фильтрация шрифтов
            function filterFonts() {
                const searchTerm = elements.searchInput.value.toLowerCase();
                const activeCategory = document.querySelector('[data-category].active').dataset.category;
                
                const filteredFonts = config.fonts.filter(font => {
                    const matchesSearch = font.name.toLowerCase().includes(searchTerm) || 
                                         font.family.toLowerCase().includes(searchTerm);
                    
                    let matchesCategory = false;
                    if (activeCategory === 'all') {
                        matchesCategory = true;
                    } else if (Array.isArray(font.category)) {
                        matchesCategory = font.category.includes(activeCategory);
                    } else {
                        matchesCategory = font.category === activeCategory;
                    }
                    
                    return matchesSearch && matchesCategory;
                });
                
                displayFonts(filteredFonts);
            }
            
            // Настройка переключателя темы
            function setupThemeToggle() {
                const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                const savedTheme = localStorage.getItem('theme');
                const currentTheme = savedTheme || (prefersDark ? 'dark' : 'light');
                
                document.documentElement.setAttribute('data-theme', currentTheme);
                
                elements.themeToggle.addEventListener('click', () => {
                    const currentTheme = document.documentElement.getAttribute('data-theme');
                    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                    
                    document.documentElement.setAttribute('data-theme', newTheme);
                    localStorage.setItem('theme', newTheme);
                });
                
                window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
                    if (!localStorage.getItem('theme')) {
                        document.documentElement.setAttribute('data-theme', e.matches ? 'dark' : 'light');
                    }
                });
            }
            
            // Вспомогательные функции
            function getWeightName(weight) {
                const weights = {
                    '100': 'Thin', '200': 'Extra Light', '300': 'Light', '400': 'Regular',
                    '500': 'Medium', '600': 'Semi Bold', '700': 'Bold', '800': 'Extra Bold', '900': 'Black'
                };
                return weights[weight] || weight;
            }
            
            function getCategoryName(category) {
                const categories = {
                    'sans-serif': 'Без засечек', 'serif': 'С засечками',
                    'monospace': 'Моноширинный', 'display': 'Декоративный', 'handwriting': 'Рукописный'
                };
                return categories[category] || category;
            }
            
            function debounce(func, wait) {
                let timeout;
                return function() {
                    const context = this, args = arguments;
                    clearTimeout(timeout);
                    timeout = setTimeout(() => func.apply(context, args), wait);
                };
            }
            
            function loadJSZip() {
                return new Promise((resolve, reject) => {
                    if (window.JSZip) return resolve(window.JSZip);
                    
                    const script = document.createElement('script');
                    script.src = 'https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js';
                    script.onload = () => resolve(window.JSZip);
                    script.onerror = () => reject(new Error('Не удалось загрузить JSZip'));
                    document.head.appendChild(script);
                });
            }
            
            function handleFontLoadError(error) {
                console.error('Ошибка загрузки шрифтов:', error);
                elements.fontList.innerHTML = `
                    <div style="text-align: center; padding: 2rem; color: var(--gray);">
                        <h3 style="margin-bottom: 1rem;">Ошибка загрузки шрифтов</h3>
                        <p>Проверьте наличие файла fonts.json</p>
                    </div>
                `;
            }
            
            // Инициализация приложения
            setupEventListeners();
            loadFonts();
        });
    </script>
</body>
</html>